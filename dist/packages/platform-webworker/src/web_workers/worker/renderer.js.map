{"version":3,"sources":["../../../../../../packages/platform-webworker/src/web_workers/worker/renderer.ts"],"names":[],"mappings":"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","file":"renderer.js","sourceRoot":"","sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable, Renderer2, RendererFactory2, RendererStyleFlags2, RendererType2} from '@angular/core';\n\nimport {ClientMessageBroker, ClientMessageBrokerFactory, FnArg, UiArguments} from '../shared/client_message_broker';\nimport {MessageBus} from '../shared/message_bus';\nimport {EVENT_2_CHANNEL, RENDERER_2_CHANNEL} from '../shared/messaging_api';\nimport {RenderStore} from '../shared/render_store';\nimport {Serializer, SerializerTypes} from '../shared/serializer';\nexport class NamedEventEmitter {\nprivate _listeners: Map<string, Function[]>;\n/**\n * @param {?} eventName\n * @param {?} callback\n * @return {?}\n */\nlisten(eventName: string, callback: Function) { this._getListeners(eventName).push(callback); }\n/**\n * @param {?} eventName\n * @param {?} listener\n * @return {?}\n */\nunlisten(eventName: string, listener: Function) {\n    const /** @type {?} */ listeners = this._getListeners(eventName);\n    const /** @type {?} */ index = listeners.indexOf(listener);\n    if (index > -1) {\n      listeners.splice(index, 1);\n    }\n  }\n/**\n * @param {?} eventName\n * @param {?} event\n * @return {?}\n */\ndispatchEvent(eventName: string, event: any) {\n    const /** @type {?} */ listeners = this._getListeners(eventName);\n    for (let /** @type {?} */ i = 0; i < listeners.length; i++) {\n      listeners[i](event);\n    }\n  }\n/**\n * @param {?} eventName\n * @return {?}\n */\n\nprivate _getListeners(eventName: string): Function[] {\n    if (!this._listeners) {\n      this._listeners = new Map<string, Function[]>();\n    }\n    let /** @type {?} */ listeners = this._listeners.get(eventName);\n    if (!listeners) {\n      listeners = [];\n      this._listeners.set(eventName, listeners);\n    }\n    return listeners;\n  }\n}\n\nfunction NamedEventEmitter_tsickle_Closure_declarations() {\n/** @type {?} */\nNamedEventEmitter.prototype._listeners;\n}\n\n/**\n * @param {?} target\n * @param {?} eventName\n * @return {?}\n */\nfunction eventNameWithTarget(target: string, eventName: string): string {\n  return `${target}:${eventName}`;\n}\nexport class WebWorkerRendererFactory2 implements RendererFactory2 {\n  globalEvents = new NamedEventEmitter();\nprivate _messageBroker: ClientMessageBroker;\n/**\n * @param {?} messageBrokerFactory\n * @param {?} bus\n * @param {?} _serializer\n * @param {?} renderStore\n */\nconstructor(\n      messageBrokerFactory: ClientMessageBrokerFactory, bus: MessageBus,\nprivate _serializer: Serializer,\npublic renderStore: RenderStore) {\n    this._messageBroker = messageBrokerFactory.createMessageBroker(RENDERER_2_CHANNEL);\n    bus.initChannel(EVENT_2_CHANNEL);\n    const /** @type {?} */ source = bus.from(EVENT_2_CHANNEL);\n    source.subscribe({next: (message: any) => this._dispatchEvent(message)});\n  }\n/**\n * @param {?} element\n * @param {?} type\n * @return {?}\n */\ncreateRenderer(element: any, type: RendererType2|null): Renderer2 {\n    const /** @type {?} */ renderer = new WebWorkerRenderer2(this);\n\n    const /** @type {?} */ id = this.renderStore.allocateId();\n    this.renderStore.store(renderer, id);\n    this.callUI('createRenderer', [\n      new FnArg(element, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(type, SerializerTypes.RENDERER_TYPE_2),\n      new FnArg(renderer, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n\n    return renderer;\n  }\n/**\n * @return {?}\n */\nbegin() {}\n/**\n * @return {?}\n */\nend() {}\n/**\n * @param {?} fnName\n * @param {?} fnArgs\n * @return {?}\n */\ncallUI(fnName: string, fnArgs: FnArg[]) {\n    const /** @type {?} */ args = new UiArguments(fnName, fnArgs);\n    this._messageBroker.runOnService(args, null);\n  }\n/**\n * @return {?}\n */\nallocateNode(): WebWorkerRenderNode {\n    const /** @type {?} */ result = new WebWorkerRenderNode();\n    const /** @type {?} */ id = this.renderStore.allocateId();\n    this.renderStore.store(result, id);\n    return result;\n  }\n/**\n * @param {?} node\n * @return {?}\n */\nfreeNode(node: any) { this.renderStore.remove(node); }\n/**\n * @return {?}\n */\nallocateId(): number { return this.renderStore.allocateId(); }\n/**\n * @param {?} message\n * @return {?}\n */\n\nprivate _dispatchEvent(message: {[key: string]: any}): void {\n    const /** @type {?} */ element: WebWorkerRenderNode =\n        this._serializer.deserialize(message['element'], SerializerTypes.RENDER_STORE_OBJECT);\n\n    const /** @type {?} */ eventName = message['eventName'];\n    const /** @type {?} */ target = message['eventTarget'];\n    const /** @type {?} */ event = message['event'];\n\n    if (target) {\n      this.globalEvents.dispatchEvent(eventNameWithTarget(target, eventName), event);\n    } else {\n      element.events.dispatchEvent(eventName, event);\n    }\n  }\nstatic decorators: {type: Function, args?: any[]}[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: {type: Function, args?: any[]}[]}|null)[] = () => [\n{type: ClientMessageBrokerFactory, },\n{type: MessageBus, },\n{type: Serializer, },\n{type: RenderStore, },\n];\n}\n\nfunction WebWorkerRendererFactory2_tsickle_Closure_declarations() {\n/** @type {?} */\nWebWorkerRendererFactory2.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nWebWorkerRendererFactory2.ctorParameters;\n/** @type {?} */\nWebWorkerRendererFactory2.prototype.globalEvents;\n/** @type {?} */\nWebWorkerRendererFactory2.prototype._messageBroker;\n/** @type {?} */\nWebWorkerRendererFactory2.prototype._serializer;\n/** @type {?} */\nWebWorkerRendererFactory2.prototype.renderStore;\n}\n\nexport class WebWorkerRenderer2 implements Renderer2 {\n  data: {[key: string]: any} = Object.create(null);\n/**\n * @param {?} _rendererFactory\n */\nconstructor(private _rendererFactory: WebWorkerRendererFactory2) {}\nprivate asFnArg = new FnArg(this, SerializerTypes.RENDER_STORE_OBJECT);\n/**\n * @return {?}\n */\ndestroy(): void { this.callUIWithRenderer('destroy'); }\n/**\n * @param {?} node\n * @return {?}\n */\ndestroyNode(node: any) {\n    this.callUIWithRenderer('destroyNode', [new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT)]);\n    this._rendererFactory.freeNode(node);\n  }\n/**\n * @param {?} name\n * @param {?=} namespace\n * @return {?}\n */\ncreateElement(name: string, namespace?: string): any {\n    const /** @type {?} */ node = this._rendererFactory.allocateNode();\n    this.callUIWithRenderer('createElement', [\n      new FnArg(name),\n      new FnArg(namespace),\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n    return node;\n  }\n/**\n * @param {?} value\n * @return {?}\n */\ncreateComment(value: string): any {\n    const /** @type {?} */ node = this._rendererFactory.allocateNode();\n    this.callUIWithRenderer('createComment', [\n      new FnArg(value),\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n    return node;\n  }\n/**\n * @param {?} value\n * @return {?}\n */\ncreateText(value: string): any {\n    const /** @type {?} */ node = this._rendererFactory.allocateNode();\n    this.callUIWithRenderer('createText', [\n      new FnArg(value),\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n    return node;\n  }\n/**\n * @param {?} parent\n * @param {?} newChild\n * @return {?}\n */\nappendChild(parent: any, newChild: any): void {\n    this.callUIWithRenderer('appendChild', [\n      new FnArg(parent, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(newChild, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n  }\n/**\n * @param {?} parent\n * @param {?} newChild\n * @param {?} refChild\n * @return {?}\n */\ninsertBefore(parent: any, newChild: any, refChild: any): void {\n    if (!parent) {\n      return;\n    }\n\n    this.callUIWithRenderer('insertBefore', [\n      new FnArg(parent, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(newChild, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(refChild, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n  }\n/**\n * @param {?} parent\n * @param {?} oldChild\n * @return {?}\n */\nremoveChild(parent: any, oldChild: any): void {\n    this.callUIWithRenderer('removeChild', [\n      new FnArg(parent, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(oldChild, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n  }\n/**\n * @param {?} selectorOrNode\n * @return {?}\n */\nselectRootElement(selectorOrNode: string|any): any {\n    const /** @type {?} */ node = this._rendererFactory.allocateNode();\n    this.callUIWithRenderer('selectRootElement', [\n      new FnArg(selectorOrNode),\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n    return node;\n  }\n/**\n * @param {?} node\n * @return {?}\n */\nparentNode(node: any): any {\n    const /** @type {?} */ res = this._rendererFactory.allocateNode();\n    this.callUIWithRenderer('parentNode', [\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(res, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n    return res;\n  }\n/**\n * @param {?} node\n * @return {?}\n */\nnextSibling(node: any): any {\n    const /** @type {?} */ res = this._rendererFactory.allocateNode();\n    this.callUIWithRenderer('nextSibling', [\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(res, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n    return res;\n  }\n/**\n * @param {?} el\n * @param {?} name\n * @param {?} value\n * @param {?=} namespace\n * @return {?}\n */\nsetAttribute(el: any, name: string, value: string, namespace?: string): void {\n    this.callUIWithRenderer('setAttribute', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(name),\n      new FnArg(value),\n      new FnArg(namespace),\n    ]);\n  }\n/**\n * @param {?} el\n * @param {?} name\n * @param {?=} namespace\n * @return {?}\n */\nremoveAttribute(el: any, name: string, namespace?: string): void {\n    this.callUIWithRenderer('removeAttribute', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(name),\n      new FnArg(namespace),\n    ]);\n  }\n/**\n * @param {?} el\n * @param {?} name\n * @return {?}\n */\naddClass(el: any, name: string): void {\n    this.callUIWithRenderer('addClass', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(name),\n    ]);\n  }\n/**\n * @param {?} el\n * @param {?} name\n * @return {?}\n */\nremoveClass(el: any, name: string): void {\n    this.callUIWithRenderer('removeClass', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(name),\n    ]);\n  }\n/**\n * @param {?} el\n * @param {?} style\n * @param {?} value\n * @param {?} flags\n * @return {?}\n */\nsetStyle(el: any, style: string, value: any, flags: RendererStyleFlags2): void {\n    this.callUIWithRenderer('setStyle', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(style),\n      new FnArg(value),\n      new FnArg(flags),\n    ]);\n  }\n/**\n * @param {?} el\n * @param {?} style\n * @param {?} flags\n * @return {?}\n */\nremoveStyle(el: any, style: string, flags: RendererStyleFlags2): void {\n    this.callUIWithRenderer('removeStyle', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(style),\n      new FnArg(flags),\n    ]);\n  }\n/**\n * @param {?} el\n * @param {?} name\n * @param {?} value\n * @return {?}\n */\nsetProperty(el: any, name: string, value: any): void {\n    this.callUIWithRenderer('setProperty', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(name),\n      new FnArg(value),\n    ]);\n  }\n/**\n * @param {?} node\n * @param {?} value\n * @return {?}\n */\nsetValue(node: any, value: string): void {\n    this.callUIWithRenderer('setValue', [\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(value),\n    ]);\n  }\n/**\n * @param {?} target\n * @param {?} eventName\n * @param {?} listener\n * @return {?}\n */\nlisten(\n      target: 'window'|'document'|'body'|any, eventName: string,\n      listener: (event: any) => boolean): () => void {\n    const /** @type {?} */ unlistenId = this._rendererFactory.allocateId();\n\n    const [targetEl, targetName, fullName]: [any, string | null, string | null] =\n        typeof target === 'string' ? [null, target, `${target}:${eventName}`] :\n                                     [target, null, null];\n\n    if (fullName) {\n      this._rendererFactory.globalEvents.listen(fullName, listener);\n    } else {\n      targetEl.events.listen(eventName, listener);\n    }\n\n    this.callUIWithRenderer('listen', [\n      new FnArg(targetEl, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(targetName),\n      new FnArg(eventName),\n      new FnArg(unlistenId),\n    ]);\n\n    return () => {\n      if (fullName) {\n        this._rendererFactory.globalEvents.unlisten(fullName, listener);\n      } else {\n        targetEl.events.unlisten(eventName, listener);\n      }\n      this.callUIWithRenderer('unlisten', [new FnArg(unlistenId)]);\n    };\n  }\n/**\n * @param {?} fnName\n * @param {?=} fnArgs\n * @return {?}\n */\n\nprivate callUIWithRenderer(fnName: string, fnArgs: FnArg[] = []) {\n    // always pass the renderer as the first arg\n    this._rendererFactory.callUI(fnName, [this.asFnArg, ...fnArgs]);\n  }\n}\n\nfunction WebWorkerRenderer2_tsickle_Closure_declarations() {\n/** @type {?} */\nWebWorkerRenderer2.prototype.data;\n/** @type {?} */\nWebWorkerRenderer2.prototype.asFnArg;\n/** @type {?} */\nWebWorkerRenderer2.prototype._rendererFactory;\n}\n\nexport class WebWorkerRenderNode { events = new NamedEventEmitter(); }\n\nfunction WebWorkerRenderNode_tsickle_Closure_declarations() {\n/** @type {?} */\nWebWorkerRenderNode.prototype.events;\n}\n\n"]}