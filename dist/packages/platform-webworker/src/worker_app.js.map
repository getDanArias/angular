{"version":3,"sources":["../../../../packages/platform-webworker/src/worker_app.ts"],"names":[],"mappings":"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","file":"worker_app.js","sourceRoot":"","sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {CommonModule, ɵPLATFORM_WORKER_APP_ID as PLATFORM_WORKER_APP_ID} from '@angular/common';\nimport {APP_INITIALIZER, ApplicationModule, ErrorHandler, NgModule, NgZone, PLATFORM_ID, PlatformRef, RendererFactory2, RootRenderer, StaticProvider, createPlatformFactory, platformCore} from '@angular/core';\nimport {DOCUMENT, ɵBROWSER_SANITIZATION_PROVIDERS as BROWSER_SANITIZATION_PROVIDERS} from '@angular/platform-browser';\n\nimport {ON_WEB_WORKER} from './web_workers/shared/api';\nimport {ClientMessageBrokerFactory, ClientMessageBrokerFactory_} from './web_workers/shared/client_message_broker';\nimport {MessageBus} from './web_workers/shared/message_bus';\nimport {PostMessageBus, PostMessageBusSink, PostMessageBusSource} from './web_workers/shared/post_message_bus';\nimport {RenderStore} from './web_workers/shared/render_store';\nimport {Serializer} from './web_workers/shared/serializer';\nimport {ServiceMessageBrokerFactory, ServiceMessageBrokerFactory_} from './web_workers/shared/service_message_broker';\nimport {WebWorkerRendererFactory2} from './web_workers/worker/renderer';\nimport {WorkerDomAdapter} from './web_workers/worker/worker_adapter';\n/**\n * \\@experimental\n */\nexport const /** @type {?} */ platformWorkerApp = createPlatformFactory(\n    platformCore, 'workerApp', [{provide: PLATFORM_ID, useValue: PLATFORM_WORKER_APP_ID}]);\n/**\n * @return {?}\n */\nexport function errorHandler(): ErrorHandler {\n  return new ErrorHandler();\n}\n\n\n// TODO(jteplitz602) remove this and compile with lib.webworker.d.ts (#3492)\nconst /** @type {?} */ _postMessage = {\n  postMessage: (message: any, transferrables?: [ArrayBuffer]) => {\n    ( /** @type {?} */((<any>postMessage)))(message, transferrables);\n  }\n};\n/**\n * @param {?} zone\n * @return {?}\n */\nexport function createMessageBus(zone: NgZone): MessageBus {\n  const /** @type {?} */ sink = new PostMessageBusSink(_postMessage);\n  const /** @type {?} */ source = new PostMessageBusSource();\n  const /** @type {?} */ bus = new PostMessageBus(sink, source);\n  bus.attachToZone(zone);\n  return bus;\n}\n/**\n * @return {?}\n */\nexport function setupWebWorker(): void {\n  WorkerDomAdapter.makeCurrent();\n}\n/**\n * The ng module for the worker app side.\n * \n * \\@experimental\n */\nexport class WorkerAppModule {\nstatic decorators: {type: Function, args?: any[]}[] = [\n{ type: NgModule, args: [{\n  providers: [\n    BROWSER_SANITIZATION_PROVIDERS,\n    Serializer,\n    {provide: DOCUMENT, useValue: null},\n    {provide: ClientMessageBrokerFactory, useClass: ClientMessageBrokerFactory_},\n    {provide: ServiceMessageBrokerFactory, useClass: ServiceMessageBrokerFactory_},\n    WebWorkerRendererFactory2,\n    {provide: RendererFactory2, useExisting: WebWorkerRendererFactory2},\n    {provide: ON_WEB_WORKER, useValue: true},\n    RenderStore,\n    {provide: ErrorHandler, useFactory: errorHandler, deps: []},\n    {provide: MessageBus, useFactory: createMessageBus, deps: [NgZone]},\n    {provide: APP_INITIALIZER, useValue: setupWebWorker, multi: true},\n  ],\n  exports: [\n    CommonModule,\n    ApplicationModule,\n  ]\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: {type: Function, args?: any[]}[]}|null)[] = () => [\n];\n}\n\nfunction WorkerAppModule_tsickle_Closure_declarations() {\n/** @type {?} */\nWorkerAppModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nWorkerAppModule.ctorParameters;\n}\n\n"]}