{"version":3,"sources":["../../../../../../packages/animations/browser/src/dsl/animation_trigger.ts"],"names":[],"mappings":"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","file":"animation_trigger.js","sourceRoot":"","sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport {ɵStyleData} from '@angular/animations';\n\nimport {copyStyles, interpolateParams} from '../util';\n\nimport {SequenceAst, StyleAst, TransitionAst, TriggerAst} from './animation_ast';\nimport {AnimationStateStyles, AnimationTransitionFactory} from './animation_transition_factory';\n/**\n * \\@experimental Animation support is experimental.\n * @param {?} name\n * @param {?} ast\n * @return {?}\n */\nexport function buildTrigger(name: string, ast: TriggerAst): AnimationTrigger {\n  return new AnimationTrigger(name, ast);\n}\n/**\n * \\@experimental Animation support is experimental.\n */\nexport class AnimationTrigger {\npublic transitionFactories: AnimationTransitionFactory[] = [];\npublic fallbackTransition: AnimationTransitionFactory;\npublic states: {[stateName: string]: AnimationStateStyles} = {};\n/**\n * @param {?} name\n * @param {?} ast\n */\nconstructor(public name: string,\npublic ast: TriggerAst) {\n    ast.states.forEach(ast => {\n      const /** @type {?} */ defaultParams = (ast.options && ast.options.params) || {};\n      this.states[ast.name] = new AnimationStateStyles(ast.style, defaultParams);\n    });\n\n    balanceProperties(this.states, 'true', '1');\n    balanceProperties(this.states, 'false', '0');\n\n    ast.transitions.forEach(ast => {\n      this.transitionFactories.push(new AnimationTransitionFactory(name, ast, this.states));\n    });\n\n    this.fallbackTransition = createFallbackTransition(name, this.states);\n  }\n/**\n * @return {?}\n */\nget containsQueries() { return this.ast.queryCount > 0; }\n/**\n * @param {?} currentState\n * @param {?} nextState\n * @return {?}\n */\nmatchTransition(currentState: any, nextState: any): AnimationTransitionFactory|null {\n    const /** @type {?} */ entry = this.transitionFactories.find(f => f.match(currentState, nextState));\n    return entry || null;\n  }\n/**\n * @param {?} currentState\n * @param {?} params\n * @param {?} errors\n * @return {?}\n */\nmatchStyles(currentState: any, params: {[key: string]: any}, errors: any[]): ɵStyleData {\n    return this.fallbackTransition.buildStyles(currentState, params, errors);\n  }\n}\n\nfunction AnimationTrigger_tsickle_Closure_declarations() {\n/** @type {?} */\nAnimationTrigger.prototype.transitionFactories;\n/** @type {?} */\nAnimationTrigger.prototype.fallbackTransition;\n/** @type {?} */\nAnimationTrigger.prototype.states;\n/** @type {?} */\nAnimationTrigger.prototype.name;\n/** @type {?} */\nAnimationTrigger.prototype.ast;\n}\n\n/**\n * @param {?} triggerName\n * @param {?} states\n * @return {?}\n */\nfunction createFallbackTransition(\n    triggerName: string,\n    states: {[stateName: string]: AnimationStateStyles}): AnimationTransitionFactory {\n  const /** @type {?} */ matchers = [(fromState: any, toState: any) => true];\n  const /** @type {?} */ animation = new SequenceAst([]);\n  const /** @type {?} */ transition = new TransitionAst(matchers, animation);\n  return new AnimationTransitionFactory(triggerName, transition, states);\n}\n/**\n * @param {?} obj\n * @param {?} key1\n * @param {?} key2\n * @return {?}\n */\nfunction balanceProperties(obj: {[key: string]: any}, key1: string, key2: string) {\n  if (obj.hasOwnProperty(key1)) {\n    if (!obj.hasOwnProperty(key2)) {\n      obj[key2] = obj[key1];\n    }\n  } else if (obj.hasOwnProperty(key2)) {\n    obj[key1] = obj[key2];\n  }\n}\n"]}