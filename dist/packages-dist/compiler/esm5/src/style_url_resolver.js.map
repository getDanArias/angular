{"version":3,"sources":["../../../../../packages/compiler/src/style_url_resolver.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAcH;IACA;;;OAGG;IACH,0BARqB,KAAO,EAAe,SAAkB;QAAxC,UAAA,GAAA,KAAA,CAAO;QAAe,cAAA,GAAA,SAAA,CAAkB;IAAG,CAAA;IAUhE,uBATC;AASD,CAPA,AAFC,IAAA;;AAWD;IACA,gBAAgB;IAChB,gBAAgB,CAAC,SAAS,CAAC,KAAK,CAAC;IACjC,gBAAgB;IAChB,gBAAgB,CAAC,SAAS,CAAC,SAAS,CAAC;AACrC,CAAC;AAED;;;GAGG;AACH,MApBC,+BAAoC,GAAK;IAqBxC,EAAE,CAAC,CAAC,GApBC,IAAM,IAAA,IAAQ,GAAA,CAAI,MAAC,KAAU,CAAA,IAAK,GAAA,CAAI,CAAC,CAAC,IAAI,GAAA,CAAI;QAAC,MAAA,CAAO,KAAA,CAAM;IAqBnE,IAAM,gBAAgB,CApBhB,WAAA,GAAc,GAAA,CAAI,KAAC,CAAK,sBAAC,CAAsB,CAAC;IAqBtD,MAAM,CApBC,WAAA,KAAgB,IAAA,IAAQ,WAAA,CAAY,CAAC,CAAC,IAAI,SAAA,IAAa,WAAA,CAAY,CAAC,CAAC,IAAI,OAAA,CAAQ;AAqB1F,CAAC;AACD;;;;;;;GAOG;AACH,MAvBC,2BAwBG,QAvBU,EAAa,OAAS,EAAQ,OAAS;IAwBnD,IAAM,gBAAgB,CAvBhB,SAAA,GAAsB,EAAA,CAAG;IAyB/B,IAAM,gBAAgB,CAvBhB,eAAA,GAwBF,OAAO,CAvBC,OAAC,CAAO,kBAAC,EAAmB,EAAA,CAAG,CAAC,OAAC,CAAO,iBAAC,EAAkB;QAAA,WAAc;aAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;YAAd,sBAAc;;QAwB/E,IAAM,gBAAgB,CAvBhB,GAAA,GAAM,CAAA,CAAE,CAAC,CAAC,IAAI,CAAA,CAAE,CAAC,CAAC,CAAC;QAwBzB,EAAE,CAAC,CAAC,CAvBC,oBAAC,CAAoB,GAAC,CAAG,CAAC,CAAC,CAAA;YAwB9B,sEAAsE;YACtE,MAAM,CAvBC,CAAA,CAAE,CAAC,CAAC,CAAC;QAwBd,CAAC;QACD,SAAS,CAvBC,IAAC,CAAI,QAAC,CAAQ,OAAC,CAAO,OAAC,EAAQ,GAAA,CAAI,CAAC,CAAC;QAwB/C,MAAM,CAvBC,EAAA,CAAG;IAwBZ,CAAC,CAvBC,CAAC;IAwBP,MAAM,CAvBC,IAAI,gBAAA,CAAiB,eAAC,EAAgB,SAAA,CAAU,CAAC;AAwB1D,CAAC;AAED,IAAM,gBAAgB,CAvBhB,iBAAA,GAAoB,iEAAA,CAAkE;AAwB5F,IAAM,gBAAgB,CAvBhB,kBAAA,GAAqB,mBAAA,CAAoB;AAwB/C,IAAM,gBAAgB,CAvBhB,sBAAA,GAAyB,cAAA,CAAe","file":"style_url_resolver.js","sourceRoot":"","sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// Some of the code comes from WebComponents.JS\n// https://github.com/webcomponents/webcomponentsjs/blob/master/src/HTMLImports/path.js\n\nimport {UrlResolver} from './url_resolver';\nexport class StyleWithImports {\n/**\n * @param {?} style\n * @param {?} styleUrls\n */\nconstructor(public style: string,\npublic styleUrls: string[]) {}\n}\n\nfunction StyleWithImports_tsickle_Closure_declarations() {\n/** @type {?} */\nStyleWithImports.prototype.style;\n/** @type {?} */\nStyleWithImports.prototype.styleUrls;\n}\n\n/**\n * @param {?} url\n * @return {?}\n */\nexport function isStyleUrlResolvable(url: string): boolean {\n  if (url == null || url.length === 0 || url[0] == '/') return false;\n  const /** @type {?} */ schemeMatch = url.match(URL_WITH_SCHEMA_REGEXP);\n  return schemeMatch === null || schemeMatch[1] == 'package' || schemeMatch[1] == 'asset';\n}\n/**\n * Rewrites stylesheets by resolving and removing the \\@import urls that\n * are either relative or don't have a `package:` scheme\n * @param {?} resolver\n * @param {?} baseUrl\n * @param {?} cssText\n * @return {?}\n */\nexport function extractStyleUrls(\n    resolver: UrlResolver, baseUrl: string, cssText: string): StyleWithImports {\n  const /** @type {?} */ foundUrls: string[] = [];\n\n  const /** @type {?} */ modifiedCssText =\n      cssText.replace(CSS_COMMENT_REGEXP, '').replace(CSS_IMPORT_REGEXP, (...m: string[]) => {\n        const /** @type {?} */ url = m[1] || m[2];\n        if (!isStyleUrlResolvable(url)) {\n          // Do not attempt to resolve non-package absolute URLs with URI scheme\n          return m[0];\n        }\n        foundUrls.push(resolver.resolve(baseUrl, url));\n        return '';\n      });\n  return new StyleWithImports(modifiedCssText, foundUrls);\n}\n\nconst /** @type {?} */ CSS_IMPORT_REGEXP = /@import\\s+(?:url\\()?\\s*(?:(?:['\"]([^'\"]*))|([^;\\)\\s]*))[^;]*;?/g;\nconst /** @type {?} */ CSS_COMMENT_REGEXP = /\\/\\*[\\s\\S]+?\\*\\//g;\nconst /** @type {?} */ URL_WITH_SCHEMA_REGEXP = /^([^:/?#]+):/;\n"]}