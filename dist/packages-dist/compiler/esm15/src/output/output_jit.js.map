{"version":3,"sources":["../../../../../packages/compiler/src/output/output_jit.ts"],"names":[],"mappings":"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","file":"output_jit.js","sourceRoot":"","sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {isDevMode} from '@angular/core';\nimport {identifierName} from '../compile_metadata';\n\nimport {EmitterVisitorContext} from './abstract_emitter';\nimport {AbstractJsEmitterVisitor} from './abstract_js_emitter';\nimport * as o from './output_ast';\n/**\n * @param {?} sourceUrl\n * @param {?} ctx\n * @param {?} vars\n * @return {?}\n */\nfunction evalExpression(\n    sourceUrl: string, ctx: EmitterVisitorContext, vars: {[key: string]: any}): any {\n  let /** @type {?} */ fnBody = `${ctx.toSource()}\\n//# sourceURL=${sourceUrl}`;\n  const /** @type {?} */ fnArgNames: string[] = [];\n  const /** @type {?} */ fnArgValues: any[] = [];\n  for (const /** @type {?} */ argName in vars) {\n    fnArgNames.push(argName);\n    fnArgValues.push(vars[argName]);\n  }\n  if (isDevMode()) {\n    // using `new Function(...)` generates a header, 1 line of no arguments, 2 lines otherwise\n    // E.g. ```\n    // function anonymous(a,b,c\n    // /**/) { ... }```\n    // We don't want to hard code this fact, so we auto detect it via an empty function first.\n    const /** @type {?} */ emptyFn = new Function(...fnArgNames.concat('return null;')).toString();\n    const /** @type {?} */ headerLines = emptyFn.slice(0, emptyFn.indexOf('return null;')).split('\\n').length - 1;\n    fnBody += `\\n${ctx.toSourceMapGenerator(sourceUrl, sourceUrl, headerLines).toJsComment()}`;\n  }\n  return new Function(...fnArgNames.concat(fnBody))(...fnArgValues);\n}\n/**\n * @param {?} sourceUrl\n * @param {?} statements\n * @return {?}\n */\nexport function jitStatements(sourceUrl: string, statements: o.Statement[]): {[key: string]: any} {\n  const /** @type {?} */ converter = new JitEmitterVisitor();\n  const /** @type {?} */ ctx = EmitterVisitorContext.createRoot();\n  converter.visitAllStatements(statements, ctx);\n  converter.createReturnStmt(ctx);\n  return evalExpression(sourceUrl, ctx, converter.getArgs());\n}\nexport class JitEmitterVisitor extends AbstractJsEmitterVisitor {\nprivate _evalArgNames: string[] = [];\nprivate _evalArgValues: any[] = [];\nprivate _evalExportedVars: string[] = [];\n/**\n * @param {?} ctx\n * @return {?}\n */\ncreateReturnStmt(ctx: EmitterVisitorContext) {\n    const /** @type {?} */ stmt = new o.ReturnStatement(new o.LiteralMapExpr(this._evalExportedVars.map(\n        resultVar => new o.LiteralMapEntry(resultVar, o.variable(resultVar), false))));\n    stmt.visitStatement(this, ctx);\n  }\n/**\n * @return {?}\n */\ngetArgs(): {[key: string]: any} {\n    const /** @type {?} */ result: {[key: string]: any} = {};\n    for (let /** @type {?} */ i = 0; i < this._evalArgNames.length; i++) {\n      result[this._evalArgNames[i]] = this._evalArgValues[i];\n    }\n    return result;\n  }\n/**\n * @param {?} ast\n * @param {?} ctx\n * @return {?}\n */\nvisitExternalExpr(ast: o.ExternalExpr, ctx: EmitterVisitorContext): any {\n    const /** @type {?} */ value = ast.value.runtime;\n    let /** @type {?} */ id = this._evalArgValues.indexOf(value);\n    if (id === -1) {\n      id = this._evalArgValues.length;\n      this._evalArgValues.push(value);\n      const /** @type {?} */ name = identifierName({reference: ast.value.runtime}) || 'val';\n      this._evalArgNames.push(`jit_${name}_${id}`);\n    }\n    ctx.print(ast, this._evalArgNames[id]);\n    return null;\n  }\n/**\n * @param {?} stmt\n * @param {?} ctx\n * @return {?}\n */\nvisitDeclareVarStmt(stmt: o.DeclareVarStmt, ctx: EmitterVisitorContext): any {\n    if (stmt.hasModifier(o.StmtModifier.Exported)) {\n      this._evalExportedVars.push(stmt.name);\n    }\n    return super.visitDeclareVarStmt(stmt, ctx);\n  }\n/**\n * @param {?} stmt\n * @param {?} ctx\n * @return {?}\n */\nvisitDeclareFunctionStmt(stmt: o.DeclareFunctionStmt, ctx: EmitterVisitorContext): any {\n    if (stmt.hasModifier(o.StmtModifier.Exported)) {\n      this._evalExportedVars.push(stmt.name);\n    }\n    return super.visitDeclareFunctionStmt(stmt, ctx);\n  }\n/**\n * @param {?} stmt\n * @param {?} ctx\n * @return {?}\n */\nvisitDeclareClassStmt(stmt: o.ClassStmt, ctx: EmitterVisitorContext): any {\n    if (stmt.hasModifier(o.StmtModifier.Exported)) {\n      this._evalExportedVars.push(stmt.name);\n    }\n    return super.visitDeclareClassStmt(stmt, ctx);\n  }\n}\n\nfunction JitEmitterVisitor_tsickle_Closure_declarations() {\n/** @type {?} */\nJitEmitterVisitor.prototype._evalArgNames;\n/** @type {?} */\nJitEmitterVisitor.prototype._evalArgValues;\n/** @type {?} */\nJitEmitterVisitor.prototype._evalExportedVars;\n}\n\n"]}