{"version":3,"sources":["../../../../../packages/compiler/src/aot/compiler_factory.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH;;;;;;GAMG;AAEH,OALO,EAA6B,iBAAA,EAAmB,QAAA,IAAY,OAAA,EAAQ,MAAA,eAAA,CAAA;AAM3E,OALO,EAAA,cAAE,EAAc,MAAA,WAAA,CAAA;AAMvB,OALO,EAAA,mBAAE,EAAmB,MAAA,yBAAA,CAAA;AAM5B,OALO,EAAA,iBAAE,EAAiB,MAAA,uBAAA,CAAA;AAM1B,OALO,EAAA,KAAE,EAAK,MAAA,4BAAA,CAAA;AAMd,OALO,EAAA,MAAE,EAAM,MAAA,6BAAA,CAAA;AAMf,OALO,EAAA,cAAE,EAAc,MAAA,0BAAA,CAAA;AAMvB,OALO,EAAA,uBAAE,EAAuB,MAAA,sBAAA,CAAA;AAMhC,OALO,EAAA,UAAE,EAAU,MAAA,0BAAA,CAAA;AAMnB,OALO,EAAA,gBAAE,EAAgB,MAAA,uBAAA,CAAA;AAMzB,OALO,EAAA,gBAAE,EAAgB,MAAA,uBAAA,CAAA;AAMzB,OALO,EAAA,iBAAE,EAAiB,MAAA,sBAAA,CAAA;AAM1B,OALO,EAAA,YAAE,EAAY,MAAA,kBAAA,CAAA;AAMrB,OALO,EAAA,wBAAE,EAAwB,MAAA,uCAAA,CAAA;AAMjC,OALO,EAAA,aAAE,EAAa,MAAA,mBAAA,CAAA;AAMtB,OALO,EAAA,cAAE,EAAc,MAAA,oCAAA,CAAA;AAMvB,OALO,EAAA,+BAAE,EAA+B,MAAA,iBAAA,CAAA;AAMxC,OALO,EAAA,YAAE,EAAY,MAAA,gCAAA,CAAA;AAOrB,OALO,EAAA,WAAE,EAAW,MAAA,YAAA,CAAA;AAQpB,OALO,EAAA,eAAE,EAAe,MAAA,oBAAA,CAAA;AAMxB,OALO,EAAe,iBAAA,EAAkB,MAAA,iBAAA,CAAA;AAMxC,OALO,EAAA,oBAAE,EAAoB,MAAA,0BAAA,CAAA;AAM7B,OALO,EAAA,kBAAE,EAAkB,MAAA,oBAAA,CAAA;AAM3B;;;;;GAKG;AACH,MANC,4BAAiC,YAAc,EAAiB,OAAS;IAQxE,IAAI,gBAAgB,CANhB,YAAA,GAAuB,OAAA,CAAQ,YAAC,IAAe,EAAA,CAAG;IAQtD,MAAM,gBAAgB,CANhB,WAAA,GAAc,+BAAA,EAAgC,CAAE;IAOtD,MAAM,gBAAgB,CANhB,WAAA,GAAc,IAAI,iBAAA,EAAkB,CAAE;IAO5C,MAAM,gBAAgB,CANhB,eAAA,GAAkB,IAAI,kBAAA,CAAmB,YAAC,EAAa,WAAA,CAAY,CAAC;IAO1E,MAAM,gBAAgB,CANhB,cAAA,GAAiB,IAAI,oBAAA,CAAqB,YAAC,EAAa,WAAA,EAAa,eAAA,CAAgB,CAAC;IAO5F,MAAM,gBAAgB,CANhB,eAAA,GAAkB,IAAI,eAAA,CAAgB,eAAC,EAAgB,cAAA,CAAe,CAAC;IAO7E,MAAM,gBAAgB,CANhB,OAAA,GAAU,IAAI,OAAA,EAAQ,CAAE;IAO9B,MAAM,gBAAgB,CANhB,UAAA,GAAa,IAAI,cAAA,CAOnB,IANI,UAAA,EAAW,EAAG,YAAA,EAAc,OAAA,CAAQ,UAAC,EAAW,OAAA,CAAQ,kBAAC,EAAmB,OAAA,CAAQ,CAAC;IAO7F,MAAM,gBAAgB,CANhB,MAAA,GAAS,IAAI,cAAA,CAAe;QAOhC,oBAAoB,EANE,iBAAA,CAAkB,QAAC;QAOzC,MAAM,EANE,KAAA;QAOR,oBAAoB,EANE,OAAA,CAAQ,oBAAC,KAAwB,KAAA;QAOvD,kBAAkB,EANE,OAAA,CAAQ,kBAAC;KAO9B,CANC,CAAC;IAOH,MAAM,gBAAgB,CANhB,UAAA,GAAa,IAAI,mBAAA,CAOnB,EAAC,GANC,EAAI,CAAA,GAAM,KAAW,YAAA,CAAa,YAAC,CAAY,GAAC,CAAG,EAAC,EAAE,WAAA,EAAa,UAAA,EAAY,MAAA,CAAO,CAAC;IAO7F,MAAM,gBAAgB,CANhB,gBAAA,GAAmB,IAAI,MAAA,CAAO,IAAI,KAAA,EAAM,CAAE,CAAC;IAOjD,MAAM,gBAAgB,CANhB,qBAAA,GAAwB,IAAI,wBAAA,EAAyB,CAAE;IAO7D,MAAM,gBAAgB,CANhB,UAAA,GAAa,IAAI,cAAA,CAOnB,MAAM,EANE,eAAA,EAAiB,gBAAA,EAAkB,qBAAA,EAAuB,UAAA,EAAY,OAAA,EAAS,EAAA,CAAG,CAAC;IAO/F,MAAM,gBAAgB,CANhB,QAAA,GAAW,IAAI,uBAAA,CAOjB,MAAM,EANE,IAAI,gBAAA,CAAiB,eAAC,CAAe,EAAE,IAAI,iBAAA,CAAkB,eAAC,CAAe,EAOrF,IANI,YAAA,CAAa,eAAC,CAAe,EAAE,eAAA,EAAiB,qBAAA,EAAuB,UAAA,EAO3E,OAAO,EANE,WAAA,EAAa,eAAA,CAAgB,CAAC;IAO3C,kDAAkD;IAClD,MAAM,gBAAgB,CANhB,YAAA,GAAe,IAAI,YAAA,CAAa,MAAC,EAAO,eAAA,EAAiB,qBAAA,CAAsB,CAAC;IAOtF,MAAM,gBAAgB,CANhB,QAAA,GAAW,IAAI,WAAA,CAOjB,MAAM,EANE,YAAA,EAAc,eAAA,EAAiB,QAAA,EAAU,UAAA,EAAY,IAAI,aAAA,CAAc,WAAC,CAAW,EAO3F,YAAY,EANE,IAAI,gBAAA,CAAiB,eAAC,CAAe,EAAE,IAAI,iBAAA,EAAkB,EAAG,eAAA,EAO9E,OAAO,CANC,MAAC,IAAS,IAAA,EAAM,OAAA,CAAQ,UAAC,IAAa,IAAA,EAAM,OAAA,CAAQ,qBAAC,IAAwB,IAAA,EAOrF,cAAc,CANC,CAAC;IAOpB,MAAM,CANC,EAAA,QAAE,EAAS,SAAA,EAAW,eAAA,EAAgB,CAAC;AAOhD,CAAC","file":"compiler_factory.js","sourceRoot":"","sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {MissingTranslationStrategy, ViewEncapsulation, ÉµConsole as Console} from '@angular/core';\nimport {CompilerConfig} from '../config';\nimport {DirectiveNormalizer} from '../directive_normalizer';\nimport {DirectiveResolver} from '../directive_resolver';\nimport {Lexer} from '../expression_parser/lexer';\nimport {Parser} from '../expression_parser/parser';\nimport {I18NHtmlParser} from '../i18n/i18n_html_parser';\nimport {CompileMetadataResolver} from '../metadata_resolver';\nimport {HtmlParser} from '../ml_parser/html_parser';\nimport {NgModuleCompiler} from '../ng_module_compiler';\nimport {NgModuleResolver} from '../ng_module_resolver';\nimport {TypeScriptEmitter} from '../output/ts_emitter';\nimport {PipeResolver} from '../pipe_resolver';\nimport {DomElementSchemaRegistry} from '../schema/dom_element_schema_registry';\nimport {StyleCompiler} from '../style_compiler';\nimport {TemplateParser} from '../template_parser/template_parser';\nimport {createOfflineCompileUrlResolver} from '../url_resolver';\nimport {ViewCompiler} from '../view_compiler/view_compiler';\n\nimport {AotCompiler} from './compiler';\nimport {AotCompilerHost} from './compiler_host';\nimport {AotCompilerOptions} from './compiler_options';\nimport {StaticReflector} from './static_reflector';\nimport {StaticSymbol, StaticSymbolCache} from './static_symbol';\nimport {StaticSymbolResolver} from './static_symbol_resolver';\nimport {AotSummaryResolver} from './summary_resolver';\n/**\n * Creates a new AotCompiler based on options and a host.\n * @param {?} compilerHost\n * @param {?} options\n * @return {?}\n */\nexport function createAotCompiler(compilerHost: AotCompilerHost, options: AotCompilerOptions):\n    {compiler: AotCompiler, reflector: StaticReflector} {\n  let /** @type {?} */ translations: string = options.translations || '';\n\n  const /** @type {?} */ urlResolver = createOfflineCompileUrlResolver();\n  const /** @type {?} */ symbolCache = new StaticSymbolCache();\n  const /** @type {?} */ summaryResolver = new AotSummaryResolver(compilerHost, symbolCache);\n  const /** @type {?} */ symbolResolver = new StaticSymbolResolver(compilerHost, symbolCache, summaryResolver);\n  const /** @type {?} */ staticReflector = new StaticReflector(summaryResolver, symbolResolver);\n  const /** @type {?} */ console = new Console();\n  const /** @type {?} */ htmlParser = new I18NHtmlParser(\n      new HtmlParser(), translations, options.i18nFormat, options.missingTranslation, console);\n  const /** @type {?} */ config = new CompilerConfig({\n    defaultEncapsulation: ViewEncapsulation.Emulated,\n    useJit: false,\n    enableLegacyTemplate: options.enableLegacyTemplate !== false,\n    missingTranslation: options.missingTranslation,\n  });\n  const /** @type {?} */ normalizer = new DirectiveNormalizer(\n      {get: (url: string) => compilerHost.loadResource(url)}, urlResolver, htmlParser, config);\n  const /** @type {?} */ expressionParser = new Parser(new Lexer());\n  const /** @type {?} */ elementSchemaRegistry = new DomElementSchemaRegistry();\n  const /** @type {?} */ tmplParser = new TemplateParser(\n      config, staticReflector, expressionParser, elementSchemaRegistry, htmlParser, console, []);\n  const /** @type {?} */ resolver = new CompileMetadataResolver(\n      config, new NgModuleResolver(staticReflector), new DirectiveResolver(staticReflector),\n      new PipeResolver(staticReflector), summaryResolver, elementSchemaRegistry, normalizer,\n      console, symbolCache, staticReflector);\n  // TODO(vicb): do not pass options.i18nFormat here\n  const /** @type {?} */ viewCompiler = new ViewCompiler(config, staticReflector, elementSchemaRegistry);\n  const /** @type {?} */ compiler = new AotCompiler(\n      config, compilerHost, staticReflector, resolver, tmplParser, new StyleCompiler(urlResolver),\n      viewCompiler, new NgModuleCompiler(staticReflector), new TypeScriptEmitter(), summaryResolver,\n      options.locale || null, options.i18nFormat || null, options.enableSummariesForJit || null,\n      symbolResolver);\n  return {compiler, reflector: staticReflector};\n}\n"]}