{"version":3,"sources":["../../../../packages/compiler/src/parse_util.ts"],"names":[],"mappings":"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","file":"parse_util.js","sourceRoot":"","sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport * as chars from './chars';\nimport {CompileIdentifierMetadata, identifierModuleUrl, identifierName} from './compile_metadata';\nexport class ParseLocation {\n/**\n * @param {?} file\n * @param {?} offset\n * @param {?} line\n * @param {?} col\n */\nconstructor(\npublic file: ParseSourceFile,\npublic offset: number,\npublic line: number,\npublic col: number) {}\n/**\n * @return {?}\n */\ntoString(): string {\n    return this.offset != null ? `${this.file.url}@${this.line}:${this.col}` : this.file.url;\n  }\n/**\n * @param {?} delta\n * @return {?}\n */\nmoveBy(delta: number): ParseLocation {\n    const /** @type {?} */ source = this.file.content;\n    const /** @type {?} */ len = source.length;\n    let /** @type {?} */ offset = this.offset;\n    let /** @type {?} */ line = this.line;\n    let /** @type {?} */ col = this.col;\n    while (offset > 0 && delta < 0) {\n      offset--;\n      delta++;\n      const /** @type {?} */ ch = source.charCodeAt(offset);\n      if (ch == chars.$LF) {\n        line--;\n        const /** @type {?} */ priorLine = source.substr(0, offset - 1).lastIndexOf(String.fromCharCode(chars.$LF));\n        col = priorLine > 0 ? offset - priorLine : offset;\n      } else {\n        col--;\n      }\n    }\n    while (offset < len && delta > 0) {\n      const /** @type {?} */ ch = source.charCodeAt(offset);\n      offset++;\n      delta--;\n      if (ch == chars.$LF) {\n        line++;\n        col = 0;\n      } else {\n        col++;\n      }\n    }\n    return new ParseLocation(this.file, offset, line, col);\n  }\n/**\n * @param {?} maxChars\n * @param {?} maxLines\n * @return {?}\n */\ngetContext(maxChars: number, maxLines: number): {before: string, after: string}|null {\n    const /** @type {?} */ content = this.file.content;\n    let /** @type {?} */ startOffset = this.offset;\n\n    if (startOffset != null) {\n      if (startOffset > content.length - 1) {\n        startOffset = content.length - 1;\n      }\n      let /** @type {?} */ endOffset = startOffset;\n      let /** @type {?} */ ctxChars = 0;\n      let /** @type {?} */ ctxLines = 0;\n\n      while (ctxChars < maxChars && startOffset > 0) {\n        startOffset--;\n        ctxChars++;\n        if (content[startOffset] == '\\n') {\n          if (++ctxLines == maxLines) {\n            break;\n          }\n        }\n      }\n\n      ctxChars = 0;\n      ctxLines = 0;\n      while (ctxChars < maxChars && endOffset < content.length - 1) {\n        endOffset++;\n        ctxChars++;\n        if (content[endOffset] == '\\n') {\n          if (++ctxLines == maxLines) {\n            break;\n          }\n        }\n      }\n\n      return {\n        before: content.substring(startOffset, this.offset),\n        after: content.substring(this.offset, endOffset + 1),\n      };\n    }\n\n    return null;\n  }\n}\n\nfunction ParseLocation_tsickle_Closure_declarations() {\n/** @type {?} */\nParseLocation.prototype.file;\n/** @type {?} */\nParseLocation.prototype.offset;\n/** @type {?} */\nParseLocation.prototype.line;\n/** @type {?} */\nParseLocation.prototype.col;\n}\n\nexport class ParseSourceFile {\n/**\n * @param {?} content\n * @param {?} url\n */\nconstructor(public content: string,\npublic url: string) {}\n}\n\nfunction ParseSourceFile_tsickle_Closure_declarations() {\n/** @type {?} */\nParseSourceFile.prototype.content;\n/** @type {?} */\nParseSourceFile.prototype.url;\n}\n\nexport class ParseSourceSpan {\n/**\n * @param {?} start\n * @param {?} end\n * @param {?=} details\n */\nconstructor(\npublic start: ParseLocation,\npublic end: ParseLocation,\npublic details: string|null = null) {}\n/**\n * @return {?}\n */\ntoString(): string {\n    return this.start.file.content.substring(this.start.offset, this.end.offset);\n  }\n}\n\nfunction ParseSourceSpan_tsickle_Closure_declarations() {\n/** @type {?} */\nParseSourceSpan.prototype.start;\n/** @type {?} */\nParseSourceSpan.prototype.end;\n/** @type {?} */\nParseSourceSpan.prototype.details;\n}\n\nexport type ParseErrorLevel = number;\nexport let ParseErrorLevel: any = {};\nParseErrorLevel.WARNING = 0;\nParseErrorLevel.ERROR = 1;\nParseErrorLevel[ParseErrorLevel.WARNING] = \"WARNING\";\nParseErrorLevel[ParseErrorLevel.ERROR] = \"ERROR\";\n\nexport class ParseError {\n/**\n * @param {?} span\n * @param {?} msg\n * @param {?=} level\n */\nconstructor(\npublic span: ParseSourceSpan,\npublic msg: string,\npublic level: ParseErrorLevel = ParseErrorLevel.ERROR) {}\n/**\n * @return {?}\n */\ncontextualMessage(): string {\n    const /** @type {?} */ ctx = this.span.start.getContext(100, 3);\n    return ctx ? ` (\"${ctx.before}[${ParseErrorLevel[this.level]} ->]${ctx.after}\")` : '';\n  }\n/**\n * @return {?}\n */\ntoString(): string {\n    const /** @type {?} */ details = this.span.details ? `, ${this.span.details}` : '';\n    return `${this.msg}${this.contextualMessage()}: ${this.span.start}${details}`;\n  }\n}\n\nfunction ParseError_tsickle_Closure_declarations() {\n/** @type {?} */\nParseError.prototype.span;\n/** @type {?} */\nParseError.prototype.msg;\n/** @type {?} */\nParseError.prototype.level;\n}\n\n/**\n * @param {?} kind\n * @param {?} type\n * @return {?}\n */\nexport function typeSourceSpan(kind: string, type: CompileIdentifierMetadata): ParseSourceSpan {\n  const /** @type {?} */ moduleUrl = identifierModuleUrl(type);\n  const /** @type {?} */ sourceFileName = moduleUrl != null ? `in ${kind} ${identifierName(type)} in ${moduleUrl}` :\n                                             `in ${kind} ${identifierName(type)}`;\n  const /** @type {?} */ sourceFile = new ParseSourceFile('', sourceFileName);\n  return new ParseSourceSpan(\n      new ParseLocation(sourceFile, -1, -1, -1), new ParseLocation(sourceFile, -1, -1, -1));\n}\n"]}