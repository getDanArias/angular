{"version":3,"sources":["../../../../packages/language-service/src/ts_plugin.ts"],"names":[],"mappings":"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","file":"ts_plugin.js","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport * as ts from 'typescript';\n\nimport {createLanguageService} from './language_service';\nimport {Completion, Diagnostic, LanguageService, LanguageServiceHost} from './types';\nimport {TypeScriptServiceHost} from './typescript_host';\n\nconst projectHostMap = new WeakMap<any, TypeScriptServiceHost>();\n\nexport function getExternalFiles(project: any): string[]|undefined {\n  const host = projectHostMap.get(project);\n  if (host) {\n    return host.getTemplateReferences();\n  }\n}\n\nconst angularOnlyResults = process.argv.indexOf('--angularOnlyResults') >= 0;\n\nfunction angularOnlyFilter(ls: ts.LanguageService): ts.LanguageService {\n  return {\n    cleanupSemanticCache: () => ls.cleanupSemanticCache(),\n    getSyntacticDiagnostics: fileName => <ts.Diagnostic[]>[],\n    getSemanticDiagnostics: fileName => <ts.Diagnostic[]>[],\n    getCompilerOptionsDiagnostics: () => <ts.Diagnostic[]>[],\n    getSyntacticClassifications: (fileName, span) => [],\n    getSemanticClassifications: (fileName, span) => [],\n    getEncodedSyntacticClassifications: (fileName, span) => <ts.Classifications><any>{undefined},\n    getEncodedSemanticClassifications: (fileName, span) => <ts.Classifications><any>undefined,\n    getCompletionsAtPosition: (fileName, position) => <ts.CompletionInfo><any>undefined,\n    getCompletionEntryDetails: (fileName, position, entryName) =>\n                                   <ts.CompletionEntryDetails><any>undefined,\n    getCompletionEntrySymbol: (fileName, position, entryName) => <ts.Symbol><any>undefined,\n    getQuickInfoAtPosition: (fileName, position) => <ts.QuickInfo><any>undefined,\n    getNameOrDottedNameSpan: (fileName, startPos, endPos) => <ts.TextSpan><any>undefined,\n    getBreakpointStatementAtPosition: (fileName, position) => <ts.TextSpan><any>undefined,\n    getSignatureHelpItems: (fileName, position) => <ts.SignatureHelpItems><any>undefined,\n    getRenameInfo: (fileName, position) => <ts.RenameInfo><any>undefined,\n    findRenameLocations: (fileName, position, findInStrings, findInComments) =>\n                             <ts.RenameLocation[]>[],\n    getDefinitionAtPosition: (fileName, position) => <ts.DefinitionInfo[]>[],\n    getTypeDefinitionAtPosition: (fileName, position) => <ts.DefinitionInfo[]>[],\n    getImplementationAtPosition: (fileName, position) => <ts.ImplementationLocation[]>[],\n    getReferencesAtPosition: (fileName: string, position: number) => <ts.ReferenceEntry[]>[],\n    findReferences: (fileName: string, position: number) => <ts.ReferencedSymbol[]>[],\n    getDocumentHighlights: (fileName, position, filesToSearch) => <ts.DocumentHighlights[]>[],\n    /** @deprecated */\n    getOccurrencesAtPosition: (fileName, position) => <ts.ReferenceEntry[]>[],\n    getNavigateToItems: searchValue => <ts.NavigateToItem[]>[],\n    getNavigationBarItems: fileName => <ts.NavigationBarItem[]>[],\n    getNavigationTree: fileName => <ts.NavigationTree><any>undefined,\n    getOutliningSpans: fileName => <ts.OutliningSpan[]>[],\n    getTodoComments: (fileName, descriptors) => <ts.TodoComment[]>[],\n    getBraceMatchingAtPosition: (fileName, position) => <ts.TextSpan[]>[],\n    getIndentationAtPosition: (fileName, position, options) => <number><any>undefined,\n    getFormattingEditsForRange: (fileName, start, end, options) => <ts.TextChange[]>[],\n    getFormattingEditsForDocument: (fileName, options) => <ts.TextChange[]>[],\n    getFormattingEditsAfterKeystroke: (fileName, position, key, options) => <ts.TextChange[]>[],\n    getDocCommentTemplateAtPosition: (fileName, position) => <ts.TextInsertion><any>undefined,\n    isValidBraceCompletionAtPosition: (fileName, position, openingBrace) => <boolean><any>undefined,\n    getCodeFixesAtPosition: (fileName, start, end, errorCodes) => <ts.CodeAction[]>[],\n    getEmitOutput: fileName => <ts.EmitOutput><any>undefined,\n    getProgram: () => ls.getProgram(),\n    dispose: () => ls.dispose()\n  };\n}\n\nexport function create(info: any /* ts.server.PluginCreateInfo */): ts.LanguageService {\n  // Create the proxy\n  const proxy: ts.LanguageService = Object.create(null);\n  let oldLS: ts.LanguageService = info.languageService;\n\n  if (angularOnlyResults) {\n    oldLS = angularOnlyFilter(oldLS);\n  }\n\n  function tryCall<T>(fileName: string | undefined, callback: () => T): T {\n    if (fileName && !oldLS.getProgram().getSourceFile(fileName)) {\n      return undefined as any as T;\n    }\n    try {\n      return callback();\n    } catch (e) {\n      return undefined as any as T;\n    }\n  }\n\n  function tryFilenameCall<T>(m: (fileName: string) => T): (fileName: string) => T {\n    return fileName => tryCall(fileName, () => <T>(m.call(ls, fileName)));\n  }\n\n  function tryFilenameOneCall<T, P>(m: (fileName: string, p: P) => T): (filename: string, p: P) =>\n      T {\n    return (fileName, p) => tryCall(fileName, () => <T>(m.call(ls, fileName, p)));\n  }\n\n  function tryFilenameTwoCall<T, P1, P2>(m: (fileName: string, p1: P1, p2: P2) => T): (\n      filename: string, p1: P1, p2: P2) => T {\n    return (fileName, p1, p2) => tryCall(fileName, () => <T>(m.call(ls, fileName, p1, p2)));\n  }\n\n  function tryFilenameThreeCall<T, P1, P2, P3>(m: (fileName: string, p1: P1, p2: P2, p3: P3) => T):\n      (filename: string, p1: P1, p2: P2, p3: P3) => T {\n    return (fileName, p1, p2, p3) => tryCall(fileName, () => <T>(m.call(ls, fileName, p1, p2, p3)));\n  }\n\n  function tryFilenameFourCall<T, P1, P2, P3, P4>(\n      m: (fileName: string, p1: P1, p2: P2, p3: P3, p4: P4) =>\n          T): (fileName: string, p1: P1, p2: P2, p3: P3, p4: P4) => T {\n    return (fileName, p1, p2, p3, p4) =>\n               tryCall(fileName, () => <T>(m.call(ls, fileName, p1, p2, p3, p4)));\n  }\n\n  function typescriptOnly(ls: ts.LanguageService): ts.LanguageService {\n    return {\n      cleanupSemanticCache: () => ls.cleanupSemanticCache(),\n      getSyntacticDiagnostics: tryFilenameCall(ls.getSyntacticDiagnostics),\n      getSemanticDiagnostics: tryFilenameCall(ls.getSemanticDiagnostics),\n      getCompilerOptionsDiagnostics: () => ls.getCompilerOptionsDiagnostics(),\n      getSyntacticClassifications: tryFilenameOneCall(ls.getSemanticClassifications),\n      getSemanticClassifications: tryFilenameOneCall(ls.getSemanticClassifications),\n      getEncodedSyntacticClassifications: tryFilenameOneCall(ls.getEncodedSyntacticClassifications),\n      getEncodedSemanticClassifications: tryFilenameOneCall(ls.getEncodedSemanticClassifications),\n      getCompletionsAtPosition: tryFilenameOneCall(ls.getCompletionsAtPosition),\n      getCompletionEntryDetails: tryFilenameTwoCall(ls.getCompletionEntryDetails),\n      getCompletionEntrySymbol: tryFilenameTwoCall(ls.getCompletionEntrySymbol),\n      getQuickInfoAtPosition: tryFilenameOneCall(ls.getQuickInfoAtPosition),\n      getNameOrDottedNameSpan: tryFilenameTwoCall(ls.getNameOrDottedNameSpan),\n      getBreakpointStatementAtPosition: tryFilenameOneCall(ls.getBreakpointStatementAtPosition),\n      getSignatureHelpItems: tryFilenameOneCall(ls.getSignatureHelpItems),\n      getRenameInfo: tryFilenameOneCall(ls.getRenameInfo),\n      findRenameLocations: tryFilenameThreeCall(ls.findRenameLocations),\n      getDefinitionAtPosition: tryFilenameOneCall(ls.getDefinitionAtPosition),\n      getTypeDefinitionAtPosition: tryFilenameOneCall(ls.getTypeDefinitionAtPosition),\n      getImplementationAtPosition: tryFilenameOneCall(ls.getImplementationAtPosition),\n      getReferencesAtPosition: tryFilenameOneCall(ls.getReferencesAtPosition),\n      findReferences: tryFilenameOneCall(ls.findReferences),\n      getDocumentHighlights: tryFilenameTwoCall(ls.getDocumentHighlights),\n      /** @deprecated */\n      getOccurrencesAtPosition: tryFilenameOneCall(ls.getOccurrencesAtPosition),\n      getNavigateToItems:\n          (searchValue, maxResultCount, fileName, excludeDtsFiles) => tryCall(\n              fileName,\n              () => ls.getNavigateToItems(searchValue, maxResultCount, fileName, excludeDtsFiles)),\n      getNavigationBarItems: tryFilenameCall(ls.getNavigationBarItems),\n      getNavigationTree: tryFilenameCall(ls.getNavigationTree),\n      getOutliningSpans: tryFilenameCall(ls.getOutliningSpans),\n      getTodoComments: tryFilenameOneCall(ls.getTodoComments),\n      getBraceMatchingAtPosition: tryFilenameOneCall(ls.getBraceMatchingAtPosition),\n      getIndentationAtPosition: tryFilenameTwoCall(ls.getIndentationAtPosition),\n      getFormattingEditsForRange: tryFilenameThreeCall(ls.getFormattingEditsForRange),\n      getFormattingEditsForDocument: tryFilenameOneCall(ls.getFormattingEditsForDocument),\n      getFormattingEditsAfterKeystroke: tryFilenameThreeCall(ls.getFormattingEditsAfterKeystroke),\n      getDocCommentTemplateAtPosition: tryFilenameOneCall(ls.getDocCommentTemplateAtPosition),\n      isValidBraceCompletionAtPosition: tryFilenameTwoCall(ls.isValidBraceCompletionAtPosition),\n      getCodeFixesAtPosition: tryFilenameFourCall(ls.getCodeFixesAtPosition),\n      getEmitOutput: tryFilenameCall(ls.getEmitOutput),\n      getProgram: () => ls.getProgram(),\n      dispose: () => ls.dispose()\n    };\n  }\n\n  oldLS = typescriptOnly(oldLS);\n\n  for (const k in oldLS) {\n    (<any>proxy)[k] = function() { return (oldLS as any)[k].apply(oldLS, arguments); };\n  }\n\n  function completionToEntry(c: Completion): ts.CompletionEntry {\n    return {kind: c.kind, name: c.name, sortText: c.sort, kindModifiers: ''};\n  }\n\n  function diagnosticToDiagnostic(d: Diagnostic, file: ts.SourceFile): ts.Diagnostic {\n    const result = {\n      file,\n      start: d.span.start,\n      length: d.span.end - d.span.start,\n      messageText: d.message,\n      category: ts.DiagnosticCategory.Error,\n      code: 0,\n      source: 'ng'\n    };\n    return result;\n  }\n\n  function tryOperation<T>(attempting: string, callback: () => T): T|null {\n    try {\n      return callback();\n    } catch (e) {\n      info.project.projectService.logger.info(`Failed to ${attempting}: ${e.toString()}`);\n      info.project.projectService.logger.info(`Stack trace: ${e.stack}`);\n      return null;\n    }\n  }\n\n  const serviceHost = new TypeScriptServiceHost(info.languageServiceHost, info.languageService);\n  const ls = createLanguageService(serviceHost as any);\n  serviceHost.setSite(ls);\n  projectHostMap.set(info.project, serviceHost);\n\n  proxy.getCompletionsAtPosition = function(fileName: string, position: number) {\n    let base = oldLS.getCompletionsAtPosition(fileName, position) || {\n      isGlobalCompletion: false,\n      isMemberCompletion: false,\n      isNewIdentifierLocation: false,\n      entries: []\n    };\n    tryOperation('get completions', () => {\n      const results = ls.getCompletionsAt(fileName, position);\n      if (results && results.length) {\n        if (base === undefined) {\n          base = {\n            isGlobalCompletion: false,\n            isMemberCompletion: false,\n            isNewIdentifierLocation: false,\n            entries: []\n          };\n        }\n        for (const entry of results) {\n          base.entries.push(completionToEntry(entry));\n        }\n      }\n    });\n    return base;\n  };\n\n  proxy.getQuickInfoAtPosition = function(fileName: string, position: number): ts.QuickInfo {\n    let base = oldLS.getQuickInfoAtPosition(fileName, position);\n    // TODO(vicb): the tags property has been removed in TS 2.2\n    tryOperation('get quick info', () => {\n      const ours = ls.getHoverAt(fileName, position);\n      if (ours) {\n        const displayParts: ts.SymbolDisplayPart[] = [];\n        for (const part of ours.text) {\n          displayParts.push({kind: part.language || 'angular', text: part.text});\n        }\n        const tags = base && (<any>base).tags;\n        base = <any>{\n          displayParts,\n          documentation: [],\n          kind: 'angular',\n          kindModifiers: 'what does this do?',\n          textSpan: {start: ours.span.start, length: ours.span.end - ours.span.start},\n        };\n        if (tags) {\n          (<any>base).tags = tags;\n        }\n      }\n    });\n\n    return base;\n  };\n\n  proxy.getSemanticDiagnostics = function(fileName: string) {\n    let result = oldLS.getSemanticDiagnostics(fileName);\n    const base = result || [];\n    tryOperation('get diagnostics', () => {\n      info.project.projectService.logger.info(`Computing Angular semantic diagnostics...`);\n      const ours = ls.getDiagnostics(fileName);\n      if (ours && ours.length) {\n        const file = oldLS.getProgram().getSourceFile(fileName);\n        base.push.apply(base, ours.map(d => diagnosticToDiagnostic(d, file)));\n      }\n    });\n\n    return base;\n  };\n\n  proxy.getDefinitionAtPosition = function(\n                                      fileName: string, position: number): ts.DefinitionInfo[] {\n    let base = oldLS.getDefinitionAtPosition(fileName, position);\n    if (base && base.length) {\n      return base;\n    }\n\n    return tryOperation('get definition', () => {\n             const ours = ls.getDefinitionAt(fileName, position);\n             if (ours && ours.length) {\n               base = base || [];\n               for (const loc of ours) {\n                 base.push({\n                   fileName: loc.fileName,\n                   textSpan: {start: loc.span.start, length: loc.span.end - loc.span.start},\n                   name: '',\n                   kind: 'definition',\n                   containerName: loc.fileName,\n                   containerKind: 'file'\n                 });\n               }\n             }\n             return base;\n           }) || [];\n  };\n\n  return proxy;\n}\n"]}