{"version":3,"sources":["../../../../../../packages/core/src/view/util.ts"],"names":[],"mappings":"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","file":"util.js","sourceRoot":"","sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {WrappedValue, devModeEqual} from '../change_detection/change_detection';\nimport {ViewEncapsulation} from '../metadata/view';\nimport {RendererType2} from '../render/api';\nimport {looseIdentical, stringify} from '../util';\n\nimport {expressionChangedAfterItHasBeenCheckedError} from './errors';\nimport {BindingDef, BindingFlags, Definition, DefinitionFactory, DepDef, DepFlags, ElementData, NodeDef, NodeFlags, QueryValueType, Services, ViewData, ViewDefinition, ViewDefinitionFactory, ViewFlags, ViewState, asElementData, asTextData} from './types';\n\nexport const /** @type {?} */ NOOP: any = () => {};\n\nconst /** @type {?} */ _tokenKeyCache = new Map<any, string>();\n/**\n * @param {?} token\n * @return {?}\n */\nexport function tokenKey(token: any): string {\n  let /** @type {?} */ key = _tokenKeyCache.get(token);\n  if (!key) {\n    key = stringify(token) + '_' + _tokenKeyCache.size;\n    _tokenKeyCache.set(token, key);\n  }\n  return key;\n}\n/**\n * @param {?} view\n * @param {?} nodeIdx\n * @param {?} bindingIdx\n * @param {?} value\n * @return {?}\n */\nexport function unwrapValue(view: ViewData, nodeIdx: number, bindingIdx: number, value: any): any {\n  if (value instanceof WrappedValue) {\n    value = value.wrapped;\n    let /** @type {?} */ globalBindingIdx = view.def.nodes[nodeIdx].bindingIndex + bindingIdx;\n    let /** @type {?} */ oldValue = view.oldValues[globalBindingIdx];\n    if (oldValue instanceof WrappedValue) {\n      oldValue = oldValue.wrapped;\n    }\n    view.oldValues[globalBindingIdx] = new WrappedValue(oldValue);\n  }\n  return value;\n}\n\nconst /** @type {?} */ UNDEFINED_RENDERER_TYPE_ID = '$$undefined';\nconst /** @type {?} */ EMPTY_RENDERER_TYPE_ID = '$$empty';\n/**\n * @param {?} values\n * @return {?}\n */\nexport function createRendererType2(values: {\n  styles: (string | any[])[],\n  encapsulation: ViewEncapsulation,\n  data: {[kind: string]: any[]}\n}): RendererType2 {\n  return {\n    id: UNDEFINED_RENDERER_TYPE_ID,\n    styles: values.styles,\n    encapsulation: values.encapsulation,\n    data: values.data\n  };\n}\n\nlet /** @type {?} */ _renderCompCount = 0;\n/**\n * @param {?=} type\n * @return {?}\n */\nexport function resolveRendererType2(type?: RendererType2 | null): RendererType2|null {\n  if (type && type.id === UNDEFINED_RENDERER_TYPE_ID) {\n    // first time we see this RendererType2. Initialize it...\n    const /** @type {?} */ isFilled =\n        ((type.encapsulation != null && type.encapsulation !== ViewEncapsulation.None) ||\n         type.styles.length || Object.keys(type.data).length);\n    if (isFilled) {\n      type.id = `c${_renderCompCount++}`;\n    } else {\n      type.id = EMPTY_RENDERER_TYPE_ID;\n    }\n  }\n  if (type && type.id === EMPTY_RENDERER_TYPE_ID) {\n    type = null;\n  }\n  return type || null;\n}\n/**\n * @param {?} view\n * @param {?} def\n * @param {?} bindingIdx\n * @param {?} value\n * @return {?}\n */\nexport function checkBinding(\n    view: ViewData, def: NodeDef, bindingIdx: number, value: any): boolean {\n  const /** @type {?} */ oldValues = view.oldValues;\n  if ((view.state & ViewState.FirstCheck) ||\n      !looseIdentical(oldValues[def.bindingIndex + bindingIdx], value)) {\n    return true;\n  }\n  return false;\n}\n/**\n * @param {?} view\n * @param {?} def\n * @param {?} bindingIdx\n * @param {?} value\n * @return {?}\n */\nexport function checkAndUpdateBinding(\n    view: ViewData, def: NodeDef, bindingIdx: number, value: any): boolean {\n  if (checkBinding(view, def, bindingIdx, value)) {\n    view.oldValues[def.bindingIndex + bindingIdx] = value;\n    return true;\n  }\n  return false;\n}\n/**\n * @param {?} view\n * @param {?} def\n * @param {?} bindingIdx\n * @param {?} value\n * @return {?}\n */\nexport function checkBindingNoChanges(\n    view: ViewData, def: NodeDef, bindingIdx: number, value: any) {\n  const /** @type {?} */ oldValue = view.oldValues[def.bindingIndex + bindingIdx];\n  if ((view.state & ViewState.BeforeFirstCheck) || !devModeEqual(oldValue, value)) {\n    throw expressionChangedAfterItHasBeenCheckedError(\n        Services.createDebugContext(view, def.index), oldValue, value,\n        (view.state & ViewState.BeforeFirstCheck) !== 0);\n  }\n}\n/**\n * @param {?} view\n * @return {?}\n */\nexport function markParentViewsForCheck(view: ViewData) {\n  let /** @type {?} */ currView: ViewData|null = view;\n  while (currView) {\n    if (currView.def.flags & ViewFlags.OnPush) {\n      currView.state |= ViewState.ChecksEnabled;\n    }\n    currView = currView.viewContainerParent || currView.parent;\n  }\n}\n/**\n * @param {?} view\n * @param {?} endView\n * @return {?}\n */\nexport function markParentViewsForCheckProjectedViews(view: ViewData, endView: ViewData) {\n  let /** @type {?} */ currView: ViewData|null = view;\n  while (currView && currView !== endView) {\n    currView.state |= ViewState.CheckProjectedViews;\n    currView = currView.viewContainerParent || currView.parent;\n  }\n}\n/**\n * @param {?} view\n * @param {?} nodeIndex\n * @param {?} eventName\n * @param {?} event\n * @return {?}\n */\nexport function dispatchEvent(\n    view: ViewData, nodeIndex: number, eventName: string, event: any): boolean|undefined {\n  try {\n    const /** @type {?} */ nodeDef = view.def.nodes[nodeIndex];\n    const /** @type {?} */ startView = nodeDef.flags & NodeFlags.ComponentView ?\n        asElementData(view, nodeIndex).componentView :\n        view;\n    markParentViewsForCheck(startView);\n    return Services.handleEvent(view, nodeIndex, eventName, event);\n  } catch ( /** @type {?} */e) {\n    // Attention: Don't rethrow, as it would cancel Observable subscriptions!\n    view.root.errorHandler.handleError(e);\n  }\n}\n/**\n * @param {?} view\n * @return {?}\n */\nexport function declaredViewContainer(view: ViewData): ElementData|null {\n  if (view.parent) {\n    const /** @type {?} */ parentView = view.parent;\n    return asElementData(parentView, /** @type {?} */(( view.parentNodeDef)).index);\n  }\n  return null;\n}\n/**\n * for component views, this is the host element.\n * for embedded views, this is the index of the parent node\n * that contains the view container.\n * @param {?} view\n * @return {?}\n */\nexport function viewParentEl(view: ViewData): NodeDef|null {\n  const /** @type {?} */ parentView = view.parent;\n  if (parentView) {\n    return /** @type {?} */(( view.parentNodeDef)).parent;\n  } else {\n    return null;\n  }\n}\n/**\n * @param {?} view\n * @param {?} def\n * @return {?}\n */\nexport function renderNode(view: ViewData, def: NodeDef): any {\n  switch (def.flags & NodeFlags.Types) {\n    case NodeFlags.TypeElement:\n      return asElementData(view, def.index).renderElement;\n    case NodeFlags.TypeText:\n      return asTextData(view, def.index).renderText;\n  }\n}\n/**\n * @param {?} target\n * @param {?} name\n * @return {?}\n */\nexport function elementEventFullName(target: string | null, name: string): string {\n  return target ? `${target}:${name}` : name;\n}\n/**\n * @param {?} view\n * @return {?}\n */\nexport function isComponentView(view: ViewData): boolean {\n  return !!view.parent && !!( /** @type {?} */((view.parentNodeDef)).flags & NodeFlags.Component);\n}\n/**\n * @param {?} view\n * @return {?}\n */\nexport function isEmbeddedView(view: ViewData): boolean {\n  return !!view.parent && !( /** @type {?} */((view.parentNodeDef)).flags & NodeFlags.Component);\n}\n/**\n * @param {?} queryId\n * @return {?}\n */\nexport function filterQueryId(queryId: number): number {\n  return 1 << (queryId % 32);\n}\n/**\n * @param {?} matchedQueriesDsl\n * @return {?}\n */\nexport function splitMatchedQueriesDsl(\n    matchedQueriesDsl: [string | number, QueryValueType][] | null): {\n  matchedQueries: {[queryId: string]: QueryValueType},\n  references: {[refId: string]: QueryValueType},\n  matchedQueryIds: number\n} {\n  const /** @type {?} */ matchedQueries: {[queryId: string]: QueryValueType} = {};\n  let /** @type {?} */ matchedQueryIds = 0;\n  const /** @type {?} */ references: {[refId: string]: QueryValueType} = {};\n  if (matchedQueriesDsl) {\n    matchedQueriesDsl.forEach(([queryId, valueType]) => {\n      if (typeof queryId === 'number') {\n        matchedQueries[queryId] = valueType;\n        matchedQueryIds |= filterQueryId(queryId);\n      } else {\n        references[queryId] = valueType;\n      }\n    });\n  }\n  return {matchedQueries, references, matchedQueryIds};\n}\n/**\n * @param {?} deps\n * @return {?}\n */\nexport function splitDepsDsl(deps: ([DepFlags, any] | any)[]): DepDef[] {\n  return deps.map(value => {\n    let /** @type {?} */ token: any;\n    let /** @type {?} */ flags: DepFlags;\n    if (Array.isArray(value)) {\n      [flags, token] = value;\n    } else {\n      flags = DepFlags.None;\n      token = value;\n    }\n    return {flags, token, tokenKey: tokenKey(token)};\n  });\n}\n/**\n * @param {?} view\n * @param {?} renderHost\n * @param {?} def\n * @return {?}\n */\nexport function getParentRenderElement(view: ViewData, renderHost: any, def: NodeDef): any {\n  let /** @type {?} */ renderParent = def.renderParent;\n  if (renderParent) {\n    if ((renderParent.flags & NodeFlags.TypeElement) === 0 ||\n        (renderParent.flags & NodeFlags.ComponentView) === 0 ||\n        ( /** @type {?} */((renderParent.element)).componentRendererType && /** @type {?} */(( /** @type {?} */((\n         renderParent.element)).componentRendererType)).encapsulation ===\n             ViewEncapsulation.Native)) {\n      // only children of non components, or children of components with native encapsulation should\n      // be attached.\n      return asElementData(view, /** @type {?} */(( def.renderParent)).index).renderElement;\n    }\n  } else {\n    return renderHost;\n  }\n}\n\nconst /** @type {?} */ DEFINITION_CACHE = new WeakMap<any, Definition<any>>();\n/**\n * @template D\n * @param {?} factory\n * @return {?}\n */\nexport function resolveDefinition<D extends Definition<any>>(factory: DefinitionFactory<D>): D {\n  let /** @type {?} */ value = /** @type {?} */(( /** @type {?} */(( DEFINITION_CACHE.get(factory)))as D));\n  if (!value) {\n    value = factory(() => NOOP);\n    value.factory = factory;\n    DEFINITION_CACHE.set(factory, value);\n  }\n  return value;\n}\n/**\n * @param {?} view\n * @return {?}\n */\nexport function rootRenderNodes(view: ViewData): any[] {\n  const /** @type {?} */ renderNodes: any[] = [];\n  visitRootRenderNodes(view, RenderNodeAction.Collect, undefined, undefined, renderNodes);\n  return renderNodes;\n}\n\nexport const enum RenderNodeAction {Collect, AppendChild, InsertBefore, RemoveChild}\n/**\n * @param {?} view\n * @param {?} action\n * @param {?} parentNode\n * @param {?} nextSibling\n * @param {?=} target\n * @return {?}\n */\nexport function visitRootRenderNodes(\n    view: ViewData, action: RenderNodeAction, parentNode: any, nextSibling: any, target?: any[]) {\n  // We need to re-compute the parent node in case the nodes have been moved around manually\n  if (action === RenderNodeAction.RemoveChild) {\n    parentNode = view.renderer.parentNode(renderNode(view, /** @type {?} */(( view.def.lastRenderRootNode))));\n  }\n  visitSiblingRenderNodes(\n      view, action, 0, view.def.nodes.length - 1, parentNode, nextSibling, target);\n}\n/**\n * @param {?} view\n * @param {?} action\n * @param {?} startIndex\n * @param {?} endIndex\n * @param {?} parentNode\n * @param {?} nextSibling\n * @param {?=} target\n * @return {?}\n */\nexport function visitSiblingRenderNodes(\n    view: ViewData, action: RenderNodeAction, startIndex: number, endIndex: number, parentNode: any,\n    nextSibling: any, target?: any[]) {\n  for (let /** @type {?} */ i = startIndex; i <= endIndex; i++) {\n    const /** @type {?} */ nodeDef = view.def.nodes[i];\n    if (nodeDef.flags & (NodeFlags.TypeElement | NodeFlags.TypeText | NodeFlags.TypeNgContent)) {\n      visitRenderNode(view, nodeDef, action, parentNode, nextSibling, target);\n    }\n    // jump to next sibling\n    i += nodeDef.childCount;\n  }\n}\n/**\n * @param {?} view\n * @param {?} ngContentIndex\n * @param {?} action\n * @param {?} parentNode\n * @param {?} nextSibling\n * @param {?=} target\n * @return {?}\n */\nexport function visitProjectedRenderNodes(\n    view: ViewData, ngContentIndex: number, action: RenderNodeAction, parentNode: any,\n    nextSibling: any, target?: any[]) {\n  let /** @type {?} */ compView: ViewData|null = view;\n  while (compView && !isComponentView(compView)) {\n    compView = compView.parent;\n  }\n  const /** @type {?} */ hostView = /** @type {?} */(( compView)).parent;\n  const /** @type {?} */ hostElDef = viewParentEl( /** @type {?} */((compView)));\n  const /** @type {?} */ startIndex = /** @type {?} */(( hostElDef)).index + 1;\n  const /** @type {?} */ endIndex = /** @type {?} */(( hostElDef)).index + /** @type {?} */(( hostElDef)).childCount;\n  for (let /** @type {?} */ i = startIndex; i <= endIndex; i++) {\n    const /** @type {?} */ nodeDef = /** @type {?} */(( hostView)).def.nodes[i];\n    if (nodeDef.ngContentIndex === ngContentIndex) {\n      visitRenderNode( /** @type {?} */((hostView)), nodeDef, action, parentNode, nextSibling, target);\n    }\n    // jump to next sibling\n    i += nodeDef.childCount;\n  }\n  if (! /** @type {?} */((hostView)).parent) {\n    // a root view\n    const /** @type {?} */ projectedNodes = view.root.projectableNodes[ngContentIndex];\n    if (projectedNodes) {\n      for (let /** @type {?} */ i = 0; i < projectedNodes.length; i++) {\n        execRenderNodeAction(view, projectedNodes[i], action, parentNode, nextSibling, target);\n      }\n    }\n  }\n}\n/**\n * @param {?} view\n * @param {?} nodeDef\n * @param {?} action\n * @param {?} parentNode\n * @param {?} nextSibling\n * @param {?=} target\n * @return {?}\n */\nfunction visitRenderNode(\n    view: ViewData, nodeDef: NodeDef, action: RenderNodeAction, parentNode: any, nextSibling: any,\n    target?: any[]) {\n  if (nodeDef.flags & NodeFlags.TypeNgContent) {\n    visitProjectedRenderNodes(\n        view, /** @type {?} */(( nodeDef.ngContent)).index, action, parentNode, nextSibling, target);\n  } else {\n    const /** @type {?} */ rn = renderNode(view, nodeDef);\n    if (action === RenderNodeAction.RemoveChild && (nodeDef.flags & NodeFlags.ComponentView) &&\n        (nodeDef.bindingFlags & BindingFlags.CatSyntheticProperty)) {\n      // Note: we might need to do both actions.\n      if (nodeDef.bindingFlags & (BindingFlags.SyntheticProperty)) {\n        execRenderNodeAction(view, rn, action, parentNode, nextSibling, target);\n      }\n      if (nodeDef.bindingFlags & (BindingFlags.SyntheticHostProperty)) {\n        const /** @type {?} */ compView = asElementData(view, nodeDef.index).componentView;\n        execRenderNodeAction(compView, rn, action, parentNode, nextSibling, target);\n      }\n    } else {\n      execRenderNodeAction(view, rn, action, parentNode, nextSibling, target);\n    }\n    if (nodeDef.flags & NodeFlags.EmbeddedViews) {\n      const /** @type {?} */ embeddedViews = /** @type {?} */(( asElementData(view, nodeDef.index).viewContainer))._embeddedViews;\n      for (let /** @type {?} */ k = 0; k < embeddedViews.length; k++) {\n        visitRootRenderNodes(embeddedViews[k], action, parentNode, nextSibling, target);\n      }\n    }\n    if (nodeDef.flags & NodeFlags.TypeElement && ! /** @type {?} */((nodeDef.element)).name) {\n      visitSiblingRenderNodes(\n          view, action, nodeDef.index + 1, nodeDef.index + nodeDef.childCount, parentNode,\n          nextSibling, target);\n    }\n  }\n}\n/**\n * @param {?} view\n * @param {?} renderNode\n * @param {?} action\n * @param {?} parentNode\n * @param {?} nextSibling\n * @param {?=} target\n * @return {?}\n */\nfunction execRenderNodeAction(\n    view: ViewData, renderNode: any, action: RenderNodeAction, parentNode: any, nextSibling: any,\n    target?: any[]) {\n  const /** @type {?} */ renderer = view.renderer;\n  switch (action) {\n    case RenderNodeAction.AppendChild:\n      renderer.appendChild(parentNode, renderNode);\n      break;\n    case RenderNodeAction.InsertBefore:\n      renderer.insertBefore(parentNode, renderNode, nextSibling);\n      break;\n    case RenderNodeAction.RemoveChild:\n      renderer.removeChild(parentNode, renderNode);\n      break;\n    case RenderNodeAction.Collect: /** @type {?} */((\n      target)).push(renderNode);\n      break;\n  }\n}\n\nconst /** @type {?} */ NS_PREFIX_RE = /^:([^:]+):(.+)$/;\n/**\n * @param {?} name\n * @return {?}\n */\nexport function splitNamespace(name: string): string[] {\n  if (name[0] === ':') {\n    const /** @type {?} */ match = /** @type {?} */(( name.match(NS_PREFIX_RE)));\n    return [match[1], match[2]];\n  }\n  return ['', name];\n}\n/**\n * @param {?} bindings\n * @return {?}\n */\nexport function calcBindingFlags(bindings: BindingDef[]): BindingFlags {\n  let /** @type {?} */ flags = 0;\n  for (let /** @type {?} */ i = 0; i < bindings.length; i++) {\n    flags |= bindings[i].flags;\n  }\n  return flags;\n}\n/**\n * @param {?} valueCount\n * @param {?} constAndInterp\n * @return {?}\n */\nexport function interpolate(valueCount: number, constAndInterp: string[]): string {\n  let /** @type {?} */ result = '';\n  for (let /** @type {?} */ i = 0; i < valueCount * 2; i = i + 2) {\n    result = result + constAndInterp[i] + _toStringWithNull(constAndInterp[i + 1]);\n  }\n  return result + constAndInterp[valueCount * 2];\n}\n/**\n * @param {?} valueCount\n * @param {?} c0\n * @param {?} a1\n * @param {?} c1\n * @param {?=} a2\n * @param {?=} c2\n * @param {?=} a3\n * @param {?=} c3\n * @param {?=} a4\n * @param {?=} c4\n * @param {?=} a5\n * @param {?=} c5\n * @param {?=} a6\n * @param {?=} c6\n * @param {?=} a7\n * @param {?=} c7\n * @param {?=} a8\n * @param {?=} c8\n * @param {?=} a9\n * @param {?=} c9\n * @return {?}\n */\nexport function inlineInterpolate(\n    valueCount: number, c0: string, a1: any, c1: string, a2?: any, c2?: string, a3?: any,\n    c3?: string, a4?: any, c4?: string, a5?: any, c5?: string, a6?: any, c6?: string, a7?: any,\n    c7?: string, a8?: any, c8?: string, a9?: any, c9?: string): string {\n  switch (valueCount) {\n    case 1:\n      return c0 + _toStringWithNull(a1) + c1;\n    case 2:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2;\n    case 3:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3;\n    case 4:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3 + _toStringWithNull(a4) + c4;\n    case 5:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5;\n    case 6:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5 + _toStringWithNull(a6) + c6;\n    case 7:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5 + _toStringWithNull(a6) +\n          c6 + _toStringWithNull(a7) + c7;\n    case 8:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5 + _toStringWithNull(a6) +\n          c6 + _toStringWithNull(a7) + c7 + _toStringWithNull(a8) + c8;\n    case 9:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5 + _toStringWithNull(a6) +\n          c6 + _toStringWithNull(a7) + c7 + _toStringWithNull(a8) + c8 + _toStringWithNull(a9) + c9;\n    default:\n      throw new Error(`Does not support more than 9 expressions`);\n  }\n}\n/**\n * @param {?} v\n * @return {?}\n */\nfunction _toStringWithNull(v: any): string {\n  return v != null ? v.toString() : '';\n}\n\nexport const /** @type {?} */ EMPTY_ARRAY: any[] = [];\nexport const /** @type {?} */ EMPTY_MAP: {[key: string]: any} = {};\n"]}