{"version":3,"sources":["../../../../../../../packages/animations/browser/src/dsl/animation_ast_builder.ts"],"names":[],"mappings":"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","file":"animation_ast_builder.js","sourceRoot":"","sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport {AUTO_STYLE, AnimateTimings, AnimationAnimateChildMetadata, AnimationAnimateMetadata, AnimationAnimateRefMetadata, AnimationGroupMetadata, AnimationKeyframesSequenceMetadata, AnimationMetadata, AnimationMetadataType, AnimationOptions, AnimationQueryMetadata, AnimationQueryOptions, AnimationReferenceMetadata, AnimationSequenceMetadata, AnimationStaggerMetadata, AnimationStateMetadata, AnimationStyleMetadata, AnimationTransitionMetadata, AnimationTriggerMetadata, style, ɵStyleData} from '@angular/animations';\n\nimport {getOrSetAsInMap} from '../render/shared';\nimport {ENTER_SELECTOR, LEAVE_SELECTOR, NG_ANIMATING_SELECTOR, NG_TRIGGER_SELECTOR, SUBSTITUTION_EXPR_START, copyObj, extractStyleParams, iteratorToArray, normalizeAnimationEntry, resolveTiming, validateStyleParams} from '../util';\n\nimport {AnimateAst, AnimateChildAst, AnimateRefAst, Ast, DynamicTimingAst, GroupAst, KeyframesAst, QueryAst, ReferenceAst, SequenceAst, StaggerAst, StateAst, StyleAst, TimingAst, TransitionAst, TriggerAst} from './animation_ast';\nimport {AnimationDslVisitor, visitAnimationNode} from './animation_dsl_visitor';\nimport {parseTransitionExpr} from './animation_transition_expr';\n\nconst /** @type {?} */ SELF_TOKEN = ':self';\nconst /** @type {?} */ SELF_TOKEN_REGEX = new RegExp(`\\s*${SELF_TOKEN}\\s*,?`, 'g');\n/**\n * @param {?} metadata\n * @param {?} errors\n * @return {?}\n */\nexport function buildAnimationAst(\n    metadata: AnimationMetadata | AnimationMetadata[], errors: any[]): Ast {\n  return new AnimationAstBuilderVisitor().build(metadata, errors);\n}\n\nconst /** @type {?} */ LEAVE_TOKEN = ':leave';\nconst /** @type {?} */ LEAVE_TOKEN_REGEX = new RegExp(LEAVE_TOKEN, 'g');\nconst /** @type {?} */ ENTER_TOKEN = ':enter';\nconst /** @type {?} */ ENTER_TOKEN_REGEX = new RegExp(ENTER_TOKEN, 'g');\nconst /** @type {?} */ ROOT_SELECTOR = '';\nexport class AnimationAstBuilderVisitor implements AnimationDslVisitor {\n/**\n * @param {?} metadata\n * @param {?} errors\n * @return {?}\n */\nbuild(metadata: AnimationMetadata|AnimationMetadata[], errors: any[]): Ast {\n    const /** @type {?} */ context = new AnimationAstBuilderContext(errors);\n    this._resetContextStyleTimingState(context);\n    return /** @type {?} */(( visitAnimationNode(this, normalizeAnimationEntry(metadata), context) as Ast));\n  }\n/**\n * @param {?} context\n * @return {?}\n */\n\nprivate _resetContextStyleTimingState(context: AnimationAstBuilderContext) {\n    context.currentQuerySelector = ROOT_SELECTOR;\n    context.collectedStyles = {};\n    context.collectedStyles[ROOT_SELECTOR] = {};\n    context.currentTime = 0;\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitTrigger(metadata: AnimationTriggerMetadata, context: AnimationAstBuilderContext):\n      TriggerAst {\n    let /** @type {?} */ queryCount = context.queryCount = 0;\n    let /** @type {?} */ depCount = context.depCount = 0;\n    const /** @type {?} */ states: StateAst[] = [];\n    const /** @type {?} */ transitions: TransitionAst[] = [];\n    metadata.definitions.forEach(def => {\n      this._resetContextStyleTimingState(context);\n      if (def.type == AnimationMetadataType.State) {\n        const /** @type {?} */ stateDef = /** @type {?} */(( def as AnimationStateMetadata));\n        const /** @type {?} */ name = stateDef.name;\n        name.split(/\\s*,\\s*/).forEach(n => {\n          stateDef.name = n;\n          states.push(this.visitState(stateDef, context));\n        });\n        stateDef.name = name;\n      } else if (def.type == AnimationMetadataType.Transition) {\n        const /** @type {?} */ transition = this.visitTransition( /** @type {?} */((def as AnimationTransitionMetadata)), context);\n        queryCount += transition.queryCount;\n        depCount += transition.depCount;\n        transitions.push(transition);\n      } else {\n        context.errors.push(\n            'only state() and transition() definitions can sit inside of a trigger()');\n      }\n    });\n    const /** @type {?} */ ast = new TriggerAst(metadata.name, states, transitions);\n    ast.options = normalizeAnimationOptions(metadata.options);\n    ast.queryCount = queryCount;\n    ast.depCount = depCount;\n    return ast;\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitState(metadata: AnimationStateMetadata, context: AnimationAstBuilderContext): StateAst {\n    const /** @type {?} */ styleAst = this.visitStyle(metadata.styles, context);\n    const /** @type {?} */ astParams = (metadata.options && metadata.options.params) || null;\n    if (styleAst.containsDynamicStyles) {\n      const /** @type {?} */ missingSubs = new Set<string>();\n      const /** @type {?} */ params = astParams || {};\n      styleAst.styles.forEach(value => {\n        if (isObject(value)) {\n          const /** @type {?} */ stylesObj = /** @type {?} */(( value as any));\n          Object.keys(stylesObj).forEach(prop => {\n            extractStyleParams(stylesObj[prop]).forEach(sub => {\n              if (!params.hasOwnProperty(sub)) {\n                missingSubs.add(sub);\n              }\n            });\n          });\n        }\n      });\n      if (missingSubs.size) {\n        const /** @type {?} */ missingSubsArr = iteratorToArray(missingSubs.values());\n        context.errors.push(\n            `state(\"${metadata.name}\", ...) must define default values for all the following style substitutions: ${missingSubsArr.join(', ')}`);\n      }\n    }\n\n    const /** @type {?} */ stateAst = new StateAst(metadata.name, styleAst);\n    if (astParams) {\n      stateAst.options = {params: astParams};\n    }\n    return stateAst;\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitTransition(metadata: AnimationTransitionMetadata, context: AnimationAstBuilderContext):\n      TransitionAst {\n    context.queryCount = 0;\n    context.depCount = 0;\n    const /** @type {?} */ entry = visitAnimationNode(this, normalizeAnimationEntry(metadata.animation), context);\n    const /** @type {?} */ matchers = parseTransitionExpr(metadata.expr, context.errors);\n    const /** @type {?} */ ast = new TransitionAst(matchers, entry);\n    ast.options = normalizeAnimationOptions(metadata.options);\n    ast.queryCount = context.queryCount;\n    ast.depCount = context.depCount;\n    return ast;\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitSequence(metadata: AnimationSequenceMetadata, context: AnimationAstBuilderContext):\n      SequenceAst {\n    const /** @type {?} */ ast = new SequenceAst(metadata.steps.map(s => visitAnimationNode(this, s, context)));\n    ast.options = normalizeAnimationOptions(metadata.options);\n    return ast;\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitGroup(metadata: AnimationGroupMetadata, context: AnimationAstBuilderContext): GroupAst {\n    const /** @type {?} */ currentTime = context.currentTime;\n    let /** @type {?} */ furthestTime = 0;\n    const /** @type {?} */ steps = metadata.steps.map(step => {\n      context.currentTime = currentTime;\n      const /** @type {?} */ innerAst = visitAnimationNode(this, step, context);\n      furthestTime = Math.max(furthestTime, context.currentTime);\n      return innerAst;\n    });\n\n    context.currentTime = furthestTime;\n    const /** @type {?} */ ast = new GroupAst(steps);\n    ast.options = normalizeAnimationOptions(metadata.options);\n    return ast;\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitAnimate(metadata: AnimationAnimateMetadata, context: AnimationAstBuilderContext):\n      AnimateAst {\n    const /** @type {?} */ timingAst = constructTimingAst(metadata.timings, context.errors);\n    context.currentAnimateTimings = timingAst;\n\n    let /** @type {?} */ styles: StyleAst|KeyframesAst;\n    let /** @type {?} */ styleMetadata: AnimationMetadata = metadata.styles ? metadata.styles : style({});\n    if (styleMetadata.type == AnimationMetadataType.Keyframes) {\n      styles = this.visitKeyframes( /** @type {?} */((styleMetadata as AnimationKeyframesSequenceMetadata)), context);\n    } else {\n      let /** @type {?} */ styleMetadata = /** @type {?} */(( metadata.styles as AnimationStyleMetadata));\n      let /** @type {?} */ isEmpty = false;\n      if (!styleMetadata) {\n        isEmpty = true;\n        const /** @type {?} */ newStyleData: {[prop: string]: string | number} = {};\n        if (timingAst.easing) {\n          newStyleData['easing'] = timingAst.easing;\n        }\n        styleMetadata = style(newStyleData);\n      }\n      context.currentTime += timingAst.duration + timingAst.delay;\n      const /** @type {?} */ styleAst = this.visitStyle(styleMetadata, context);\n      styleAst.isEmptyStep = isEmpty;\n      styles = styleAst;\n    }\n\n    context.currentAnimateTimings = null;\n    return new AnimateAst(timingAst, styles);\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitStyle(metadata: AnimationStyleMetadata, context: AnimationAstBuilderContext): StyleAst {\n    const /** @type {?} */ ast = this._makeStyleAst(metadata, context);\n    this._validateStyleAst(ast, context);\n    return ast;\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\n\nprivate _makeStyleAst(metadata: AnimationStyleMetadata, context: AnimationAstBuilderContext):\n      StyleAst {\n    const /** @type {?} */ styles: (ɵStyleData | string)[] = [];\n    if (Array.isArray(metadata.styles)) {\n      ( /** @type {?} */((metadata.styles as(ɵStyleData | string)[]))).forEach(styleTuple => {\n        if (typeof styleTuple == 'string') {\n          if (styleTuple == AUTO_STYLE) {\n            styles.push( /** @type {?} */((styleTuple as string)));\n          } else {\n            context.errors.push(`The provided style string value ${styleTuple} is not allowed.`);\n          }\n        } else {\n          styles.push( /** @type {?} */((styleTuple as ɵStyleData)));\n        }\n      });\n    } else {\n      styles.push(metadata.styles);\n    }\n\n    let /** @type {?} */ containsDynamicStyles = false;\n    let /** @type {?} */ collectedEasing: string|null = null;\n    styles.forEach(styleData => {\n      if (isObject(styleData)) {\n        const /** @type {?} */ styleMap = /** @type {?} */(( styleData as ɵStyleData));\n        const /** @type {?} */ easing = styleMap['easing'];\n        if (easing) {\n          collectedEasing = /** @type {?} */(( easing as string));\n          delete styleMap['easing'];\n        }\n        if (!containsDynamicStyles) {\n          for (let /** @type {?} */ prop in styleMap) {\n            const /** @type {?} */ value = styleMap[prop];\n            if (value.toString().indexOf(SUBSTITUTION_EXPR_START) >= 0) {\n              containsDynamicStyles = true;\n              break;\n            }\n          }\n        }\n      }\n    });\n\n    const /** @type {?} */ ast = new StyleAst(styles, collectedEasing, metadata.offset);\n    ast.containsDynamicStyles = containsDynamicStyles;\n    return ast;\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\n\nprivate _validateStyleAst(ast: StyleAst, context: AnimationAstBuilderContext): void {\n    const /** @type {?} */ timings = context.currentAnimateTimings;\n    let /** @type {?} */ endTime = context.currentTime;\n    let /** @type {?} */ startTime = context.currentTime;\n    if (timings && startTime > 0) {\n      startTime -= timings.duration + timings.delay;\n    }\n\n    ast.styles.forEach(tuple => {\n      if (typeof tuple == 'string') return;\n\n      Object.keys(tuple).forEach(prop => {\n        const /** @type {?} */ collectedStyles = context.collectedStyles[ /** @type {?} */((context.currentQuerySelector))];\n        const /** @type {?} */ collectedEntry = collectedStyles[prop];\n        let /** @type {?} */ updateCollectedStyle = true;\n        if (collectedEntry) {\n          if (startTime != endTime && startTime >= collectedEntry.startTime &&\n              endTime <= collectedEntry.endTime) {\n            context.errors.push(\n                `The CSS property \"${prop}\" that exists between the times of \"${collectedEntry.startTime}ms\" and \"${collectedEntry.endTime}ms\" is also being animated in a parallel animation between the times of \"${startTime}ms\" and \"${endTime}ms\"`);\n            updateCollectedStyle = false;\n          }\n\n          // we always choose the smaller start time value since we\n          // want to have a record of the entire animation window where\n          // the style property is being animated in between\n          startTime = collectedEntry.startTime;\n        }\n\n        if (updateCollectedStyle) {\n          collectedStyles[prop] = {startTime, endTime};\n        }\n\n        if (context.options) {\n          validateStyleParams(tuple[prop], context.options, context.errors);\n        }\n      });\n    });\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitKeyframes(metadata: AnimationKeyframesSequenceMetadata, context: AnimationAstBuilderContext):\n      KeyframesAst {\n    if (!context.currentAnimateTimings) {\n      context.errors.push(`keyframes() must be placed inside of a call to animate()`);\n      return new KeyframesAst([]);\n    }\n\n    const /** @type {?} */ MAX_KEYFRAME_OFFSET = 1;\n\n    let /** @type {?} */ totalKeyframesWithOffsets = 0;\n    const /** @type {?} */ offsets: number[] = [];\n    let /** @type {?} */ offsetsOutOfOrder = false;\n    let /** @type {?} */ keyframesOutOfRange = false;\n    let /** @type {?} */ previousOffset: number = 0;\n\n    const /** @type {?} */ keyframes: StyleAst[] = metadata.steps.map(styles => {\n      const /** @type {?} */ style = this._makeStyleAst(styles, context);\n      let /** @type {?} */ offsetVal: number|null =\n          style.offset != null ? style.offset : consumeOffset(style.styles);\n      let /** @type {?} */ offset: number = 0;\n      if (offsetVal != null) {\n        totalKeyframesWithOffsets++;\n        offset = style.offset = offsetVal;\n      }\n      keyframesOutOfRange = keyframesOutOfRange || offset < 0 || offset > 1;\n      offsetsOutOfOrder = offsetsOutOfOrder || offset < previousOffset;\n      previousOffset = offset;\n      offsets.push(offset);\n      return style;\n    });\n\n    if (keyframesOutOfRange) {\n      context.errors.push(`Please ensure that all keyframe offsets are between 0 and 1`);\n    }\n\n    if (offsetsOutOfOrder) {\n      context.errors.push(`Please ensure that all keyframe offsets are in order`);\n    }\n\n    const /** @type {?} */ length = metadata.steps.length;\n    let /** @type {?} */ generatedOffset = 0;\n    if (totalKeyframesWithOffsets > 0 && totalKeyframesWithOffsets < length) {\n      context.errors.push(`Not all style() steps within the declared keyframes() contain offsets`);\n    } else if (totalKeyframesWithOffsets == 0) {\n      generatedOffset = MAX_KEYFRAME_OFFSET / (length - 1);\n    }\n\n    const /** @type {?} */ limit = length - 1;\n    const /** @type {?} */ currentTime = context.currentTime;\n    const /** @type {?} */ currentAnimateTimings = /** @type {?} */(( context.currentAnimateTimings));\n    const /** @type {?} */ animateDuration = currentAnimateTimings.duration;\n    keyframes.forEach((kf, i) => {\n      const /** @type {?} */ offset = generatedOffset > 0 ? (i == limit ? 1 : (generatedOffset * i)) : offsets[i];\n      const /** @type {?} */ durationUpToThisFrame = offset * animateDuration;\n      context.currentTime = currentTime + currentAnimateTimings.delay + durationUpToThisFrame;\n      currentAnimateTimings.duration = durationUpToThisFrame;\n      this._validateStyleAst(kf, context);\n      kf.offset = offset;\n    });\n\n    return new KeyframesAst(keyframes);\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitReference(metadata: AnimationReferenceMetadata, context: AnimationAstBuilderContext):\n      ReferenceAst {\n    const /** @type {?} */ entry = visitAnimationNode(this, normalizeAnimationEntry(metadata.animation), context);\n    const /** @type {?} */ ast = new ReferenceAst(entry);\n    ast.options = normalizeAnimationOptions(metadata.options);\n    return ast;\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitAnimateChild(metadata: AnimationAnimateChildMetadata, context: AnimationAstBuilderContext):\n      AnimateChildAst {\n    context.depCount++;\n    const /** @type {?} */ ast = new AnimateChildAst();\n    ast.options = normalizeAnimationOptions(metadata.options);\n    return ast;\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitAnimateRef(metadata: AnimationAnimateRefMetadata, context: AnimationAstBuilderContext):\n      AnimateRefAst {\n    const /** @type {?} */ animation = this.visitReference(metadata.animation, context);\n    const /** @type {?} */ ast = new AnimateRefAst(animation);\n    ast.options = normalizeAnimationOptions(metadata.options);\n    return ast;\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitQuery(metadata: AnimationQueryMetadata, context: AnimationAstBuilderContext): QueryAst {\n    const /** @type {?} */ parentSelector = /** @type {?} */(( context.currentQuerySelector));\n    const /** @type {?} */ options = /** @type {?} */(( (metadata.options || {}) as AnimationQueryOptions));\n\n    context.queryCount++;\n    context.currentQuery = metadata;\n    const [selector, includeSelf] = normalizeSelector(metadata.selector);\n    context.currentQuerySelector =\n        parentSelector.length ? (parentSelector + ' ' + selector) : selector;\n    getOrSetAsInMap(context.collectedStyles, context.currentQuerySelector, {});\n\n    const /** @type {?} */ entry = visitAnimationNode(this, normalizeAnimationEntry(metadata.animation), context);\n    context.currentQuery = null;\n    context.currentQuerySelector = parentSelector;\n\n    const /** @type {?} */ ast = new QueryAst(selector, options.limit || 0, !!options.optional, includeSelf, entry);\n    ast.originalSelector = metadata.selector;\n    ast.options = normalizeAnimationOptions(metadata.options);\n    return ast;\n  }\n/**\n * @param {?} metadata\n * @param {?} context\n * @return {?}\n */\nvisitStagger(metadata: AnimationStaggerMetadata, context: AnimationAstBuilderContext):\n      StaggerAst {\n    if (!context.currentQuery) {\n      context.errors.push(`stagger() can only be used inside of query()`);\n    }\n    const /** @type {?} */ timings = metadata.timings === 'full' ?\n        {duration: 0, delay: 0, easing: 'full'} :\n        resolveTiming(metadata.timings, context.errors, true);\n    const /** @type {?} */ animation =\n        visitAnimationNode(this, normalizeAnimationEntry(metadata.animation), context);\n    return new StaggerAst(timings, animation);\n  }\n}\n/**\n * @param {?} selector\n * @return {?}\n */\nfunction normalizeSelector(selector: string): [string, boolean] {\n  const /** @type {?} */ hasAmpersand = selector.split(/\\s*,\\s*/).find(token => token == SELF_TOKEN) ? true : false;\n  if (hasAmpersand) {\n    selector = selector.replace(SELF_TOKEN_REGEX, '');\n  }\n\n  selector = selector.replace(ENTER_TOKEN_REGEX, ENTER_SELECTOR)\n                 .replace(LEAVE_TOKEN_REGEX, LEAVE_SELECTOR)\n                 .replace(/@\\*/g, NG_TRIGGER_SELECTOR)\n                 .replace(/@\\w+/g, match => NG_TRIGGER_SELECTOR + '-' + match.substr(1))\n                 .replace(/:animating/g, NG_ANIMATING_SELECTOR);\n\n  return [selector, hasAmpersand];\n}\n/**\n * @param {?} obj\n * @return {?}\n */\nfunction normalizeParams(obj: {[key: string]: any} | any): {[key: string]: any}|null {\n  return obj ? copyObj(obj) : null;\n}\n\nexport type StyleTimeTuple = {\n  startTime: number; endTime: number;\n};\nexport class AnimationAstBuilderContext {\npublic queryCount: number = 0;\npublic depCount: number = 0;\npublic currentTransition: AnimationTransitionMetadata|null = null;\npublic currentQuery: AnimationQueryMetadata|null = null;\npublic currentQuerySelector: string|null = null;\npublic currentAnimateTimings: TimingAst|null = null;\npublic currentTime: number = 0;\npublic collectedStyles: {[selectorName: string]: {[propName: string]: StyleTimeTuple}} = {};\npublic options: AnimationOptions|null = null;\n/**\n * @param {?} errors\n */\nconstructor(public errors: any[]) {}\n}\n\nfunction AnimationAstBuilderContext_tsickle_Closure_declarations() {\n/** @type {?} */\nAnimationAstBuilderContext.prototype.queryCount;\n/** @type {?} */\nAnimationAstBuilderContext.prototype.depCount;\n/** @type {?} */\nAnimationAstBuilderContext.prototype.currentTransition;\n/** @type {?} */\nAnimationAstBuilderContext.prototype.currentQuery;\n/** @type {?} */\nAnimationAstBuilderContext.prototype.currentQuerySelector;\n/** @type {?} */\nAnimationAstBuilderContext.prototype.currentAnimateTimings;\n/** @type {?} */\nAnimationAstBuilderContext.prototype.currentTime;\n/** @type {?} */\nAnimationAstBuilderContext.prototype.collectedStyles;\n/** @type {?} */\nAnimationAstBuilderContext.prototype.options;\n/** @type {?} */\nAnimationAstBuilderContext.prototype.errors;\n}\n\n/**\n * @param {?} styles\n * @return {?}\n */\nfunction consumeOffset(styles: ɵStyleData | string | (ɵStyleData | string)[]): number|null {\n  if (typeof styles == 'string') return null;\n\n  let /** @type {?} */ offset: number|null = null;\n\n  if (Array.isArray(styles)) {\n    styles.forEach(styleTuple => {\n      if (isObject(styleTuple) && styleTuple.hasOwnProperty('offset')) {\n        const /** @type {?} */ obj = /** @type {?} */(( styleTuple as ɵStyleData));\n        offset = parseFloat( /** @type {?} */((obj['offset'] as string)));\n        delete obj['offset'];\n      }\n    });\n  } else if (isObject(styles) && styles.hasOwnProperty('offset')) {\n    const /** @type {?} */ obj = /** @type {?} */(( styles as ɵStyleData));\n    offset = parseFloat( /** @type {?} */((obj['offset'] as string)));\n    delete obj['offset'];\n  }\n  return offset;\n}\n/**\n * @param {?} value\n * @return {?}\n */\nfunction isObject(value: any): boolean {\n  return !Array.isArray(value) && typeof value == 'object';\n}\n/**\n * @param {?} value\n * @param {?} errors\n * @return {?}\n */\nfunction constructTimingAst(value: string | number | AnimateTimings, errors: any[]) {\n  let /** @type {?} */ timings: AnimateTimings|null = null;\n  if (value.hasOwnProperty('duration')) {\n    timings = /** @type {?} */(( value as AnimateTimings));\n  } else if (typeof value == 'number') {\n    const /** @type {?} */ duration = resolveTiming( /** @type {?} */((value as number)), errors).duration;\n    return new TimingAst( /** @type {?} */((value as number)), 0, '');\n  }\n\n  const /** @type {?} */ strValue = /** @type {?} */(( value as string));\n  const /** @type {?} */ isDynamic = strValue.split(/\\s+/).some(v => v.charAt(0) == '{' && v.charAt(1) == '{');\n  if (isDynamic) {\n    return new DynamicTimingAst(strValue);\n  }\n\n  timings = timings || resolveTiming(strValue, errors);\n  return new TimingAst(timings.duration, timings.delay, timings.easing);\n}\n/**\n * @param {?} options\n * @return {?}\n */\nfunction normalizeAnimationOptions(options: AnimationOptions | null): AnimationOptions {\n  if (options) {\n    options = copyObj(options);\n    if (options['params']) {\n      options['params'] = /** @type {?} */(( normalizeParams(options['params'])));\n    }\n  } else {\n    options = {};\n  }\n  return options;\n}\n"]}