{"version":3,"sources":["../../../../../../../packages/animations/browser/src/dsl/animation_timeline_builder.ts"],"names":[],"mappings":"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","file":"animation_timeline_builder.js","sourceRoot":"","sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport {AUTO_STYLE, AnimateChildOptions, AnimateTimings, AnimationOptions, AnimationQueryOptions, ɵPRE_STYLE as PRE_STYLE, ɵStyleData} from '@angular/animations';\n\nimport {AnimationDriver} from '../render/animation_driver';\nimport {copyObj, copyStyles, interpolateParams, iteratorToArray, resolveTiming, resolveTimingValue} from '../util';\n\nimport {AnimateAst, AnimateChildAst, AnimateRefAst, Ast, AstVisitor, DynamicTimingAst, GroupAst, KeyframesAst, QueryAst, ReferenceAst, SequenceAst, StaggerAst, StateAst, StyleAst, TimingAst, TransitionAst, TriggerAst} from './animation_ast';\nimport {AnimationTimelineInstruction, createTimelineInstruction} from './animation_timeline_instruction';\nimport {ElementInstructionMap} from './element_instruction_map';\n\nconst /** @type {?} */ ONE_FRAME_IN_MILLISECONDS = 1;\n/**\n * @param {?} driver\n * @param {?} rootElement\n * @param {?} ast\n * @param {?=} startingStyles\n * @param {?=} finalStyles\n * @param {?=} options\n * @param {?=} subInstructions\n * @param {?=} errors\n * @return {?}\n */\nexport function buildAnimationTimelines(\n    driver: AnimationDriver, rootElement: any, ast: Ast, startingStyles: ɵStyleData = {},\n    finalStyles: ɵStyleData = {}, options: AnimationOptions,\n    subInstructions?: ElementInstructionMap, errors: any[] = []): AnimationTimelineInstruction[] {\n  return new AnimationTimelineBuilderVisitor().buildKeyframes(\n      driver, rootElement, ast, startingStyles, finalStyles, options, subInstructions, errors);\n}\nexport class AnimationTimelineBuilderVisitor implements AstVisitor {\n/**\n * @param {?} driver\n * @param {?} rootElement\n * @param {?} ast\n * @param {?} startingStyles\n * @param {?} finalStyles\n * @param {?} options\n * @param {?=} subInstructions\n * @param {?=} errors\n * @return {?}\n */\nbuildKeyframes(\n      driver: AnimationDriver, rootElement: any, ast: Ast, startingStyles: ɵStyleData,\n      finalStyles: ɵStyleData, options: AnimationOptions, subInstructions?: ElementInstructionMap,\n      errors: any[] = []): AnimationTimelineInstruction[] {\n    subInstructions = subInstructions || new ElementInstructionMap();\n    const /** @type {?} */ context = new AnimationTimelineContext(driver, rootElement, subInstructions, errors, []);\n    context.options = options;\n    context.currentTimeline.setStyles([startingStyles], null, context.errors, options);\n\n    ast.visit(this, context);\n\n    // this checks to see if an actual animation happened\n    const /** @type {?} */ timelines = context.timelines.filter(timeline => timeline.containsAnimation());\n    if (timelines.length && Object.keys(finalStyles).length) {\n      const /** @type {?} */ tl = timelines[timelines.length - 1];\n      if (!tl.allowOnlyTimelineStyles()) {\n        tl.setStyles([finalStyles], null, context.errors, options);\n      }\n    }\n\n    return timelines.length ? timelines.map(timeline => timeline.buildKeyframes()) :\n                              [createTimelineInstruction(rootElement, [], [], [], 0, 0, '', false)];\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitTrigger(ast: TriggerAst, context: AnimationTimelineContext): any {\n    // these values are not visited in this AST\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitState(ast: StateAst, context: AnimationTimelineContext): any {\n    // these values are not visited in this AST\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitTransition(ast: TransitionAst, context: AnimationTimelineContext): any {\n    // these values are not visited in this AST\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimateChild(ast: AnimateChildAst, context: AnimationTimelineContext): any {\n    const /** @type {?} */ elementInstructions = context.subInstructions.consume(context.element);\n    if (elementInstructions) {\n      const /** @type {?} */ innerContext = context.createSubContext(ast.options);\n      const /** @type {?} */ startTime = context.currentTimeline.currentTime;\n      const /** @type {?} */ endTime = this._visitSubInstructions(\n          elementInstructions, innerContext, /** @type {?} */(( innerContext.options as AnimateChildOptions)));\n      if (startTime != endTime) {\n        // we do this on the upper context because we created a sub context for\n        // the sub child animations\n        context.transformIntoNewTimeline(endTime);\n      }\n    }\n    context.previousNode = ast;\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimateRef(ast: AnimateRefAst, context: AnimationTimelineContext): any {\n    const /** @type {?} */ innerContext = context.createSubContext(ast.options);\n    innerContext.transformIntoNewTimeline();\n    this.visitReference(ast.animation, innerContext);\n    context.transformIntoNewTimeline(innerContext.currentTimeline.currentTime);\n    context.previousNode = ast;\n  }\n/**\n * @param {?} instructions\n * @param {?} context\n * @param {?} options\n * @return {?}\n */\n\nprivate _visitSubInstructions(\n      instructions: AnimationTimelineInstruction[], context: AnimationTimelineContext,\n      options: AnimateChildOptions): number {\n    const /** @type {?} */ startTime = context.currentTimeline.currentTime;\n    let /** @type {?} */ furthestTime = startTime;\n\n    // this is a special-case for when a user wants to skip a sub\n    // animation from being fired entirely.\n    const /** @type {?} */ duration = options.duration != null ? resolveTimingValue(options.duration) : null;\n    const /** @type {?} */ delay = options.delay != null ? resolveTimingValue(options.delay) : null;\n    if (duration !== 0) {\n      instructions.forEach(instruction => {\n        const /** @type {?} */ instructionTimings =\n            context.appendInstructionToTimeline(instruction, duration, delay);\n        furthestTime =\n            Math.max(furthestTime, instructionTimings.duration + instructionTimings.delay);\n      });\n    }\n\n    return furthestTime;\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitReference(ast: ReferenceAst, context: AnimationTimelineContext) {\n    context.updateOptions(ast.options, true);\n    ast.animation.visit(this, context);\n    context.previousNode = ast;\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitSequence(ast: SequenceAst, context: AnimationTimelineContext) {\n    const /** @type {?} */ subContextCount = context.subContextCount;\n    let /** @type {?} */ ctx = context;\n    const /** @type {?} */ options = ast.options;\n\n    if (options && (options.params || options.delay)) {\n      ctx = context.createSubContext(options);\n      ctx.transformIntoNewTimeline();\n\n      if (options.delay != null) {\n        if (ctx.previousNode instanceof StyleAst) {\n          ctx.currentTimeline.snapshotCurrentStyles();\n          ctx.previousNode = DEFAULT_NOOP_PREVIOUS_NODE;\n        }\n\n        const /** @type {?} */ delay = resolveTimingValue(options.delay);\n        ctx.delayNextStep(delay);\n      }\n    }\n\n    if (ast.steps.length) {\n      ast.steps.forEach(s => s.visit(this, ctx));\n\n      // this is here just incase the inner steps only contain or end with a style() call\n      ctx.currentTimeline.applyStylesToKeyframe();\n\n      // this means that some animation function within the sequence\n      // ended up creating a sub timeline (which means the current\n      // timeline cannot overlap with the contents of the sequence)\n      if (ctx.subContextCount > subContextCount) {\n        ctx.transformIntoNewTimeline();\n      }\n    }\n\n    context.previousNode = ast;\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitGroup(ast: GroupAst, context: AnimationTimelineContext) {\n    const /** @type {?} */ innerTimelines: TimelineBuilder[] = [];\n    let /** @type {?} */ furthestTime = context.currentTimeline.currentTime;\n    const /** @type {?} */ delay = ast.options && ast.options.delay ? resolveTimingValue(ast.options.delay) : 0;\n\n    ast.steps.forEach(s => {\n      const /** @type {?} */ innerContext = context.createSubContext(ast.options);\n      if (delay) {\n        innerContext.delayNextStep(delay);\n      }\n\n      s.visit(this, innerContext);\n      furthestTime = Math.max(furthestTime, innerContext.currentTimeline.currentTime);\n      innerTimelines.push(innerContext.currentTimeline);\n    });\n\n    // this operation is run after the AST loop because otherwise\n    // if the parent timeline's collected styles were updated then\n    // it would pass in invalid data into the new-to-be forked items\n    innerTimelines.forEach(\n        timeline => context.currentTimeline.mergeTimelineCollectedStyles(timeline));\n    context.transformIntoNewTimeline(furthestTime);\n    context.previousNode = ast;\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitTiming(ast: TimingAst, context: AnimationTimelineContext): AnimateTimings {\n    if (ast instanceof DynamicTimingAst) {\n      const /** @type {?} */ strValue = context.params ?\n          interpolateParams(ast.value, context.params, context.errors) :\n          ast.value.toString();\n      return resolveTiming(strValue, context.errors);\n    } else {\n      return {duration: ast.duration, delay: ast.delay, easing: ast.easing};\n    }\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimate(ast: AnimateAst, context: AnimationTimelineContext) {\n    const /** @type {?} */ timings = context.currentAnimateTimings = this.visitTiming(ast.timings, context);\n    const /** @type {?} */ timeline = context.currentTimeline;\n    if (timings.delay) {\n      context.incrementTime(timings.delay);\n      timeline.snapshotCurrentStyles();\n    }\n\n    const /** @type {?} */ style = ast.style;\n    if (style instanceof KeyframesAst) {\n      this.visitKeyframes(style, context);\n    } else {\n      context.incrementTime(timings.duration);\n      this.visitStyle( /** @type {?} */((style as StyleAst)), context);\n      timeline.applyStylesToKeyframe();\n    }\n\n    context.currentAnimateTimings = null;\n    context.previousNode = ast;\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitStyle(ast: StyleAst, context: AnimationTimelineContext) {\n    const /** @type {?} */ timeline = context.currentTimeline;\n    const /** @type {?} */ timings = /** @type {?} */(( context.currentAnimateTimings));\n\n    // this is a special case for when a style() call\n    // directly follows  an animate() call (but not inside of an animate() call)\n    if (!timings && timeline.getCurrentStyleProperties().length) {\n      timeline.forwardFrame();\n    }\n\n    const /** @type {?} */ easing = (timings && timings.easing) || ast.easing;\n    if (ast.isEmptyStep) {\n      timeline.applyEmptyStep(easing);\n    } else {\n      timeline.setStyles(ast.styles, easing, context.errors, context.options);\n    }\n\n    context.previousNode = ast;\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitKeyframes(ast: KeyframesAst, context: AnimationTimelineContext) {\n    const /** @type {?} */ currentAnimateTimings = /** @type {?} */(( context.currentAnimateTimings));\n    const /** @type {?} */ startTime = ( /** @type {?} */((context.currentTimeline))).duration;\n    const /** @type {?} */ duration = currentAnimateTimings.duration;\n    const /** @type {?} */ innerContext = context.createSubContext();\n    const /** @type {?} */ innerTimeline = innerContext.currentTimeline;\n    innerTimeline.easing = currentAnimateTimings.easing;\n\n    ast.styles.forEach(step => {\n      const /** @type {?} */ offset: number = step.offset || 0;\n      innerTimeline.forwardTime(offset * duration);\n      innerTimeline.setStyles(step.styles, step.easing, context.errors, context.options);\n      innerTimeline.applyStylesToKeyframe();\n    });\n\n    // this will ensure that the parent timeline gets all the styles from\n    // the child even if the new timeline below is not used\n    context.currentTimeline.mergeTimelineCollectedStyles(innerTimeline);\n\n    // we do this because the window between this timeline and the sub timeline\n    // should ensure that the styles within are exactly the same as they were before\n    context.transformIntoNewTimeline(startTime + duration);\n    context.previousNode = ast;\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitQuery(ast: QueryAst, context: AnimationTimelineContext) {\n    // in the event that the first step before this is a style step we need\n    // to ensure the styles are applied before the children are animated\n    const /** @type {?} */ startTime = context.currentTimeline.currentTime;\n    const /** @type {?} */ options = /** @type {?} */(( (ast.options || {}) as AnimationQueryOptions));\n    const /** @type {?} */ delay = options.delay ? resolveTimingValue(options.delay) : 0;\n\n    if (delay && (context.previousNode instanceof StyleAst ||\n                  (startTime == 0 && context.currentTimeline.getCurrentStyleProperties().length))) {\n      context.currentTimeline.snapshotCurrentStyles();\n      context.previousNode = DEFAULT_NOOP_PREVIOUS_NODE;\n    }\n\n    let /** @type {?} */ furthestTime = startTime;\n    const /** @type {?} */ elms = context.invokeQuery(\n        ast.selector, ast.originalSelector, ast.limit, ast.includeSelf,\n        options.optional ? true : false, context.errors);\n\n    context.currentQueryTotal = elms.length;\n    let /** @type {?} */ sameElementTimeline: TimelineBuilder|null = null;\n    elms.forEach((element, i) => {\n\n      context.currentQueryIndex = i;\n      const /** @type {?} */ innerContext = context.createSubContext(ast.options, element);\n      if (delay) {\n        innerContext.delayNextStep(delay);\n      }\n\n      if (element === context.element) {\n        sameElementTimeline = innerContext.currentTimeline;\n      }\n\n      ast.animation.visit(this, innerContext);\n\n      // this is here just incase the inner steps only contain or end\n      // with a style() call (which is here to signal that this is a preparatory\n      // call to style an element before it is animated again)\n      innerContext.currentTimeline.applyStylesToKeyframe();\n\n      const /** @type {?} */ endTime = innerContext.currentTimeline.currentTime;\n      furthestTime = Math.max(furthestTime, endTime);\n    });\n\n    context.currentQueryIndex = 0;\n    context.currentQueryTotal = 0;\n    context.transformIntoNewTimeline(furthestTime);\n\n    if (sameElementTimeline) {\n      context.currentTimeline.mergeTimelineCollectedStyles(sameElementTimeline);\n      context.currentTimeline.snapshotCurrentStyles();\n    }\n\n    context.previousNode = ast;\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitStagger(ast: StaggerAst, context: AnimationTimelineContext) {\n    const /** @type {?} */ parentContext = /** @type {?} */(( context.parentContext));\n    const /** @type {?} */ tl = context.currentTimeline;\n    const /** @type {?} */ timings = ast.timings;\n    const /** @type {?} */ duration = Math.abs(timings.duration);\n    const /** @type {?} */ maxTime = duration * (context.currentQueryTotal - 1);\n    let /** @type {?} */ delay = duration * context.currentQueryIndex;\n\n    let /** @type {?} */ staggerTransformer = timings.duration < 0 ? 'reverse' : timings.easing;\n    switch (staggerTransformer) {\n      case 'reverse':\n        delay = maxTime - delay;\n        break;\n      case 'full':\n        delay = parentContext.currentStaggerTime;\n        break;\n    }\n\n    const /** @type {?} */ timeline = context.currentTimeline;\n    if (delay) {\n      timeline.delayNextStep(delay);\n    }\n\n    const /** @type {?} */ startingTime = timeline.currentTime;\n    ast.animation.visit(this, context);\n    context.previousNode = ast;\n\n    // time = duration + delay\n    // the reason why this computation is so complex is because\n    // the inner timeline may either have a delay value or a stretched\n    // keyframe depending on if a subtimeline is not used or is used.\n    parentContext.currentStaggerTime =\n        (tl.currentTime - startingTime) + (tl.startTime - parentContext.currentTimeline.startTime);\n  }\n}\n\nexport declare type StyleAtTime = {\n  time: number; value: string | number;\n};\n\nconst /** @type {?} */ DEFAULT_NOOP_PREVIOUS_NODE = /** @type {?} */(( <Ast>{}));\nexport class AnimationTimelineContext {\npublic parentContext: AnimationTimelineContext|null = null;\npublic currentTimeline: TimelineBuilder;\npublic currentAnimateTimings: AnimateTimings|null = null;\npublic previousNode: Ast = DEFAULT_NOOP_PREVIOUS_NODE;\npublic subContextCount = 0;\npublic options: AnimationOptions = {};\npublic currentQueryIndex: number = 0;\npublic currentQueryTotal: number = 0;\npublic currentStaggerTime: number = 0;\n/**\n * @param {?} _driver\n * @param {?} element\n * @param {?} subInstructions\n * @param {?} errors\n * @param {?} timelines\n * @param {?=} initialTimeline\n */\nconstructor(\nprivate _driver: AnimationDriver,\npublic element: any,\npublic subInstructions: ElementInstructionMap,\npublic errors: any[],\npublic timelines: TimelineBuilder[], initialTimeline?: TimelineBuilder) {\n    this.currentTimeline = initialTimeline || new TimelineBuilder(element, 0);\n    timelines.push(this.currentTimeline);\n  }\n/**\n * @return {?}\n */\nget params() { return this.options.params; }\n/**\n * @param {?} options\n * @param {?=} skipIfExists\n * @return {?}\n */\nupdateOptions(options: AnimationOptions|null, skipIfExists?: boolean) {\n    if (!options) return;\n\n    const /** @type {?} */ newOptions = /** @type {?} */(( options as any));\n    let /** @type {?} */ optionsToUpdate = this.options;\n\n    // NOTE: this will get patched up when other animation methods support duration overrides\n    if (newOptions.duration != null) {\n      ( /** @type {?} */((optionsToUpdate as any))).duration = resolveTimingValue(newOptions.duration);\n    }\n\n    if (newOptions.delay != null) {\n      optionsToUpdate.delay = resolveTimingValue(newOptions.delay);\n    }\n\n    const /** @type {?} */ newParams = newOptions.params;\n    if (newParams) {\n      let /** @type {?} */ paramsToUpdate: {[name: string]: any} = /** @type {?} */(( optionsToUpdate.params));\n      if (!paramsToUpdate) {\n        paramsToUpdate = this.options.params = {};\n      }\n\n      Object.keys(newParams).forEach(name => {\n        if (!skipIfExists || !paramsToUpdate.hasOwnProperty(name)) {\n          paramsToUpdate[name] = interpolateParams(newParams[name], paramsToUpdate, this.errors);\n        }\n      });\n    }\n  }\n/**\n * @return {?}\n */\n\nprivate _copyOptions() {\n    const /** @type {?} */ options: AnimationOptions = {};\n    if (this.options) {\n      const /** @type {?} */ oldParams = this.options.params;\n      if (oldParams) {\n        const /** @type {?} */ params: {[name: string]: any} = options['params'] = {};\n        Object.keys(this.options.params).forEach(name => { params[name] = oldParams[name]; });\n      }\n    }\n    return options;\n  }\n/**\n * @param {?=} options\n * @param {?=} element\n * @param {?=} newTime\n * @return {?}\n */\ncreateSubContext(options: AnimationOptions|null = null, element?: any, newTime?: number):\n      AnimationTimelineContext {\n    const /** @type {?} */ target = element || this.element;\n    const /** @type {?} */ context = new AnimationTimelineContext(\n        this._driver, target, this.subInstructions, this.errors, this.timelines,\n        this.currentTimeline.fork(target, newTime || 0));\n    context.previousNode = this.previousNode;\n    context.currentAnimateTimings = this.currentAnimateTimings;\n\n    context.options = this._copyOptions();\n    context.updateOptions(options);\n\n    context.currentQueryIndex = this.currentQueryIndex;\n    context.currentQueryTotal = this.currentQueryTotal;\n    context.parentContext = this;\n    this.subContextCount++;\n    return context;\n  }\n/**\n * @param {?=} newTime\n * @return {?}\n */\ntransformIntoNewTimeline(newTime?: number) {\n    this.previousNode = DEFAULT_NOOP_PREVIOUS_NODE;\n    this.currentTimeline = this.currentTimeline.fork(this.element, newTime);\n    this.timelines.push(this.currentTimeline);\n    return this.currentTimeline;\n  }\n/**\n * @param {?} instruction\n * @param {?} duration\n * @param {?} delay\n * @return {?}\n */\nappendInstructionToTimeline(\n      instruction: AnimationTimelineInstruction, duration: number|null,\n      delay: number|null): AnimateTimings {\n    const /** @type {?} */ updatedTimings: AnimateTimings = {\n      duration: duration != null ? duration : instruction.duration,\n      delay: this.currentTimeline.currentTime + (delay != null ? delay : 0) + instruction.delay,\n      easing: ''\n    };\n    const /** @type {?} */ builder = new SubTimelineBuilder(\n        instruction.element, instruction.keyframes, instruction.preStyleProps,\n        instruction.postStyleProps, updatedTimings, instruction.stretchStartingKeyframe);\n    this.timelines.push(builder);\n    return updatedTimings;\n  }\n/**\n * @param {?} time\n * @return {?}\n */\nincrementTime(time: number) {\n    this.currentTimeline.forwardTime(this.currentTimeline.duration + time);\n  }\n/**\n * @param {?} delay\n * @return {?}\n */\ndelayNextStep(delay: number) {\n    // negative delays are not yet supported\n    if (delay > 0) {\n      this.currentTimeline.delayNextStep(delay);\n    }\n  }\n/**\n * @param {?} selector\n * @param {?} originalSelector\n * @param {?} limit\n * @param {?} includeSelf\n * @param {?} optional\n * @param {?} errors\n * @return {?}\n */\ninvokeQuery(\n      selector: string, originalSelector: string, limit: number, includeSelf: boolean,\n      optional: boolean, errors: any[]): any[] {\n    let /** @type {?} */ results: any[] = [];\n    if (includeSelf) {\n      results.push(this.element);\n    }\n    if (selector.length > 0) {  // if :self is only used then the selector is empty\n      const /** @type {?} */ multi = limit != 1;\n      results.push(...this._driver.query(this.element, selector, multi));\n    }\n\n    if (!optional && results.length == 0) {\n      errors.push(\n          `\\`query(\"${originalSelector}\")\\` returned zero elements. (Use \\`query(\"${originalSelector}\", { optional: true })\\` if you wish to allow this.)`);\n    }\n    return results;\n  }\n}\n\nfunction AnimationTimelineContext_tsickle_Closure_declarations() {\n/** @type {?} */\nAnimationTimelineContext.prototype.parentContext;\n/** @type {?} */\nAnimationTimelineContext.prototype.currentTimeline;\n/** @type {?} */\nAnimationTimelineContext.prototype.currentAnimateTimings;\n/** @type {?} */\nAnimationTimelineContext.prototype.previousNode;\n/** @type {?} */\nAnimationTimelineContext.prototype.subContextCount;\n/** @type {?} */\nAnimationTimelineContext.prototype.options;\n/** @type {?} */\nAnimationTimelineContext.prototype.currentQueryIndex;\n/** @type {?} */\nAnimationTimelineContext.prototype.currentQueryTotal;\n/** @type {?} */\nAnimationTimelineContext.prototype.currentStaggerTime;\n/** @type {?} */\nAnimationTimelineContext.prototype._driver;\n/** @type {?} */\nAnimationTimelineContext.prototype.element;\n/** @type {?} */\nAnimationTimelineContext.prototype.subInstructions;\n/** @type {?} */\nAnimationTimelineContext.prototype.errors;\n/** @type {?} */\nAnimationTimelineContext.prototype.timelines;\n}\n\nexport class TimelineBuilder {\npublic duration: number = 0;\npublic easing: string|null;\nprivate _previousKeyframe: ɵStyleData = {};\nprivate _currentKeyframe: ɵStyleData = {};\nprivate _keyframes = new Map<number, ɵStyleData>();\nprivate _styleSummary: {[prop: string]: StyleAtTime} = {};\nprivate _localTimelineStyles: ɵStyleData;\nprivate _globalTimelineStyles: ɵStyleData;\nprivate _pendingStyles: ɵStyleData = {};\nprivate _backFill: ɵStyleData = {};\nprivate _currentEmptyStepKeyframe: ɵStyleData|null = null;\n/**\n * @param {?} element\n * @param {?} startTime\n * @param {?=} _elementTimelineStylesLookup\n */\nconstructor(\npublic element: any,\npublic startTime: number,\nprivate _elementTimelineStylesLookup?: Map<any, ɵStyleData>) {\n    if (!this._elementTimelineStylesLookup) {\n      this._elementTimelineStylesLookup = new Map<any, ɵStyleData>();\n    }\n\n    this._localTimelineStyles = Object.create(this._backFill, {});\n    this._globalTimelineStyles = /** @type {?} */(( this._elementTimelineStylesLookup.get(element)));\n    if (!this._globalTimelineStyles) {\n      this._globalTimelineStyles = this._localTimelineStyles;\n      this._elementTimelineStylesLookup.set(element, this._localTimelineStyles);\n    }\n    this._loadKeyframe();\n  }\n/**\n * @return {?}\n */\ncontainsAnimation(): boolean {\n    switch (this._keyframes.size) {\n      case 0:\n        return false;\n      case 1:\n        return this.getCurrentStyleProperties().length > 0;\n      default:\n        return true;\n    }\n  }\n/**\n * @return {?}\n */\ngetCurrentStyleProperties(): string[] { return Object.keys(this._currentKeyframe); }\n/**\n * @return {?}\n */\nget currentTime() { return this.startTime + this.duration; }\n/**\n * @param {?} delay\n * @return {?}\n */\ndelayNextStep(delay: number) {\n    // in the event that a style() step is placed right before a stagger()\n    // and that style() step is the very first style() value in the animation\n    // then we need to make a copy of the keyframe [0, copy, 1] so that the delay\n    // properly applies the style() values to work with the stagger...\n    const /** @type {?} */ hasPreStyleStep = this._keyframes.size == 1 && Object.keys(this._pendingStyles).length;\n\n    if (this.duration || hasPreStyleStep) {\n      this.forwardTime(this.currentTime + delay);\n      if (hasPreStyleStep) {\n        this.snapshotCurrentStyles();\n      }\n    } else {\n      this.startTime += delay;\n    }\n  }\n/**\n * @param {?} element\n * @param {?=} currentTime\n * @return {?}\n */\nfork(element: any, currentTime?: number): TimelineBuilder {\n    this.applyStylesToKeyframe();\n    return new TimelineBuilder(\n        element, currentTime || this.currentTime, this._elementTimelineStylesLookup);\n  }\n/**\n * @return {?}\n */\n\nprivate _loadKeyframe() {\n    if (this._currentKeyframe) {\n      this._previousKeyframe = this._currentKeyframe;\n    }\n    this._currentKeyframe = /** @type {?} */(( this._keyframes.get(this.duration)));\n    if (!this._currentKeyframe) {\n      this._currentKeyframe = Object.create(this._backFill, {});\n      this._keyframes.set(this.duration, this._currentKeyframe);\n    }\n  }\n/**\n * @return {?}\n */\nforwardFrame() {\n    this.duration += ONE_FRAME_IN_MILLISECONDS;\n    this._loadKeyframe();\n  }\n/**\n * @param {?} time\n * @return {?}\n */\nforwardTime(time: number) {\n    this.applyStylesToKeyframe();\n    this.duration = time;\n    this._loadKeyframe();\n  }\n/**\n * @param {?} prop\n * @param {?} value\n * @return {?}\n */\n\nprivate _updateStyle(prop: string, value: string|number) {\n    this._localTimelineStyles[prop] = value;\n    this._globalTimelineStyles[prop] = value;\n    this._styleSummary[prop] = {time: this.currentTime, value};\n  }\n/**\n * @return {?}\n */\nallowOnlyTimelineStyles() { return this._currentEmptyStepKeyframe !== this._currentKeyframe; }\n/**\n * @param {?} easing\n * @return {?}\n */\napplyEmptyStep(easing: string|null) {\n    if (easing) {\n      this._previousKeyframe['easing'] = easing;\n    }\n\n    // special case for animate(duration):\n    // all missing styles are filled with a `*` value then\n    // if any destination styles are filled in later on the same\n    // keyframe then they will override the overridden styles\n    // We use `_globalTimelineStyles` here because there may be\n    // styles in previous keyframes that are not present in this timeline\n    Object.keys(this._globalTimelineStyles).forEach(prop => {\n      this._backFill[prop] = this._globalTimelineStyles[prop] || AUTO_STYLE;\n      this._currentKeyframe[prop] = AUTO_STYLE;\n    });\n    this._currentEmptyStepKeyframe = this._currentKeyframe;\n  }\n/**\n * @param {?} input\n * @param {?} easing\n * @param {?} errors\n * @param {?=} options\n * @return {?}\n */\nsetStyles(\n      input: (ɵStyleData|string)[], easing: string|null, errors: any[],\n      options?: AnimationOptions) {\n    if (easing) {\n      this._previousKeyframe['easing'] = easing;\n    }\n\n    const /** @type {?} */ params = (options && options.params) || {};\n    const /** @type {?} */ styles = flattenStyles(input, this._globalTimelineStyles);\n    Object.keys(styles).forEach(prop => {\n      const /** @type {?} */ val = interpolateParams(styles[prop], params, errors);\n      this._pendingStyles[prop] = val;\n      if (!this._localTimelineStyles.hasOwnProperty(prop)) {\n        this._backFill[prop] = this._globalTimelineStyles.hasOwnProperty(prop) ?\n            this._globalTimelineStyles[prop] :\n            AUTO_STYLE;\n      }\n      this._updateStyle(prop, val);\n    });\n  }\n/**\n * @return {?}\n */\napplyStylesToKeyframe() {\n    const /** @type {?} */ styles = this._pendingStyles;\n    const /** @type {?} */ props = Object.keys(styles);\n    if (props.length == 0) return;\n\n    this._pendingStyles = {};\n\n    props.forEach(prop => {\n      const /** @type {?} */ val = styles[prop];\n      this._currentKeyframe[prop] = val;\n    });\n\n    Object.keys(this._localTimelineStyles).forEach(prop => {\n      if (!this._currentKeyframe.hasOwnProperty(prop)) {\n        this._currentKeyframe[prop] = this._localTimelineStyles[prop];\n      }\n    });\n  }\n/**\n * @return {?}\n */\nsnapshotCurrentStyles() {\n    Object.keys(this._localTimelineStyles).forEach(prop => {\n      const /** @type {?} */ val = this._localTimelineStyles[prop];\n      this._pendingStyles[prop] = val;\n      this._updateStyle(prop, val);\n    });\n  }\n/**\n * @return {?}\n */\ngetFinalKeyframe() { return this._keyframes.get(this.duration); }\n/**\n * @return {?}\n */\nget properties() {\n    const /** @type {?} */ properties: string[] = [];\n    for (let /** @type {?} */ prop in this._currentKeyframe) {\n      properties.push(prop);\n    }\n    return properties;\n  }\n/**\n * @param {?} timeline\n * @return {?}\n */\nmergeTimelineCollectedStyles(timeline: TimelineBuilder) {\n    Object.keys(timeline._styleSummary).forEach(prop => {\n      const /** @type {?} */ details0 = this._styleSummary[prop];\n      const /** @type {?} */ details1 = timeline._styleSummary[prop];\n      if (!details0 || details1.time > details0.time) {\n        this._updateStyle(prop, details1.value);\n      }\n    });\n  }\n/**\n * @return {?}\n */\nbuildKeyframes(): AnimationTimelineInstruction {\n    this.applyStylesToKeyframe();\n    const /** @type {?} */ preStyleProps = new Set<string>();\n    const /** @type {?} */ postStyleProps = new Set<string>();\n    const /** @type {?} */ isEmpty = this._keyframes.size === 1 && this.duration === 0;\n\n    let /** @type {?} */ finalKeyframes: ɵStyleData[] = [];\n    this._keyframes.forEach((keyframe, time) => {\n      const /** @type {?} */ finalKeyframe = copyStyles(keyframe, true);\n      Object.keys(finalKeyframe).forEach(prop => {\n        const /** @type {?} */ value = finalKeyframe[prop];\n        if (value == PRE_STYLE) {\n          preStyleProps.add(prop);\n        } else if (value == AUTO_STYLE) {\n          postStyleProps.add(prop);\n        }\n      });\n      if (!isEmpty) {\n        finalKeyframe['offset'] = time / this.duration;\n      }\n      finalKeyframes.push(finalKeyframe);\n    });\n\n    const /** @type {?} */ preProps: string[] = preStyleProps.size ? iteratorToArray(preStyleProps.values()) : [];\n    const /** @type {?} */ postProps: string[] = postStyleProps.size ? iteratorToArray(postStyleProps.values()) : [];\n\n    // special case for a 0-second animation (which is designed just to place styles onscreen)\n    if (isEmpty) {\n      const /** @type {?} */ kf0 = finalKeyframes[0];\n      const /** @type {?} */ kf1 = copyObj(kf0);\n      kf0['offset'] = 0;\n      kf1['offset'] = 1;\n      finalKeyframes = [kf0, kf1];\n    }\n\n    return createTimelineInstruction(\n        this.element, finalKeyframes, preProps, postProps, this.duration, this.startTime,\n        this.easing, false);\n  }\n}\n\nfunction TimelineBuilder_tsickle_Closure_declarations() {\n/** @type {?} */\nTimelineBuilder.prototype.duration;\n/** @type {?} */\nTimelineBuilder.prototype.easing;\n/** @type {?} */\nTimelineBuilder.prototype._previousKeyframe;\n/** @type {?} */\nTimelineBuilder.prototype._currentKeyframe;\n/** @type {?} */\nTimelineBuilder.prototype._keyframes;\n/** @type {?} */\nTimelineBuilder.prototype._styleSummary;\n/** @type {?} */\nTimelineBuilder.prototype._localTimelineStyles;\n/** @type {?} */\nTimelineBuilder.prototype._globalTimelineStyles;\n/** @type {?} */\nTimelineBuilder.prototype._pendingStyles;\n/** @type {?} */\nTimelineBuilder.prototype._backFill;\n/** @type {?} */\nTimelineBuilder.prototype._currentEmptyStepKeyframe;\n/** @type {?} */\nTimelineBuilder.prototype.element;\n/** @type {?} */\nTimelineBuilder.prototype.startTime;\n/** @type {?} */\nTimelineBuilder.prototype._elementTimelineStylesLookup;\n}\n\nclass SubTimelineBuilder extends TimelineBuilder {\npublic timings: AnimateTimings;\n/**\n * @param {?} element\n * @param {?} keyframes\n * @param {?} preStyleProps\n * @param {?} postStyleProps\n * @param {?} timings\n * @param {?=} _stretchStartingKeyframe\n */\nconstructor(\npublic element: any,\npublic keyframes: ɵStyleData[],\npublic preStyleProps: string[],\npublic postStyleProps: string[], timings: AnimateTimings,\nprivate _stretchStartingKeyframe: boolean = false) {\n    super(element, timings.delay);\n    this.timings = {duration: timings.duration, delay: timings.delay, easing: timings.easing};\n  }\n/**\n * @return {?}\n */\ncontainsAnimation(): boolean { return this.keyframes.length > 1; }\n/**\n * @return {?}\n */\nbuildKeyframes(): AnimationTimelineInstruction {\n    let /** @type {?} */ keyframes = this.keyframes;\n    let {delay, duration, easing} = this.timings;\n    if (this._stretchStartingKeyframe && delay) {\n      const /** @type {?} */ newKeyframes: ɵStyleData[] = [];\n      const /** @type {?} */ totalTime = duration + delay;\n      const /** @type {?} */ startingGap = delay / totalTime;\n\n      // the original starting keyframe now starts once the delay is done\n      const /** @type {?} */ newFirstKeyframe = copyStyles(keyframes[0], false);\n      newFirstKeyframe['offset'] = 0;\n      newKeyframes.push(newFirstKeyframe);\n\n      const /** @type {?} */ oldFirstKeyframe = copyStyles(keyframes[0], false);\n      oldFirstKeyframe['offset'] = roundOffset(startingGap);\n      newKeyframes.push(oldFirstKeyframe);\n\n      /*\n        When the keyframe is stretched then it means that the delay before the animation\n        starts is gone. Instead the first keyframe is placed at the start of the animation\n        and it is then copied to where it starts when the original delay is over. This basically\n        means nothing animates during that delay, but the styles are still renderered. For this\n        to work the original offset values that exist in the original keyframes must be \"warped\"\n        so that they can take the new keyframe + delay into account.\n\n        delay=1000, duration=1000, keyframes = 0 .5 1\n\n        turns into\n\n        delay=0, duration=2000, keyframes = 0 .33 .66 1\n       */\n\n      // offsets between 1 ... n -1 are all warped by the keyframe stretch\n      const /** @type {?} */ limit = keyframes.length - 1;\n      for (let /** @type {?} */ i = 1; i <= limit; i++) {\n        let /** @type {?} */ kf = copyStyles(keyframes[i], false);\n        const /** @type {?} */ oldOffset = /** @type {?} */(( kf['offset'] as number));\n        const /** @type {?} */ timeAtKeyframe = delay + oldOffset * duration;\n        kf['offset'] = roundOffset(timeAtKeyframe / totalTime);\n        newKeyframes.push(kf);\n      }\n\n      // the new starting keyframe should be added at the start\n      duration = totalTime;\n      delay = 0;\n      easing = '';\n\n      keyframes = newKeyframes;\n    }\n\n    return createTimelineInstruction(\n        this.element, keyframes, this.preStyleProps, this.postStyleProps, duration, delay, easing,\n        true);\n  }\n}\n\nfunction SubTimelineBuilder_tsickle_Closure_declarations() {\n/** @type {?} */\nSubTimelineBuilder.prototype.timings;\n/** @type {?} */\nSubTimelineBuilder.prototype.element;\n/** @type {?} */\nSubTimelineBuilder.prototype.keyframes;\n/** @type {?} */\nSubTimelineBuilder.prototype.preStyleProps;\n/** @type {?} */\nSubTimelineBuilder.prototype.postStyleProps;\n/** @type {?} */\nSubTimelineBuilder.prototype._stretchStartingKeyframe;\n}\n\n/**\n * @param {?} offset\n * @param {?=} decimalPoints\n * @return {?}\n */\nfunction roundOffset(offset: number, decimalPoints = 3): number {\n  const /** @type {?} */ mult = Math.pow(10, decimalPoints - 1);\n  return Math.round(offset * mult) / mult;\n}\n/**\n * @param {?} input\n * @param {?} allStyles\n * @return {?}\n */\nfunction flattenStyles(input: (ɵStyleData | string)[], allStyles: ɵStyleData) {\n  const /** @type {?} */ styles: ɵStyleData = {};\n  let /** @type {?} */ allProperties: string[];\n  input.forEach(token => {\n    if (token === '*') {\n      allProperties = allProperties || Object.keys(allStyles);\n      allProperties.forEach(prop => { styles[prop] = AUTO_STYLE; });\n    } else {\n      copyStyles( /** @type {?} */((token as ɵStyleData)), false, styles);\n    }\n  });\n  return styles;\n}\n"]}