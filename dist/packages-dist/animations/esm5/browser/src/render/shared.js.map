{"version":3,"sources":["../../../../../../../packages/animations/browser/src/render/shared.ts"],"names":[],"mappings":"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","file":"shared.js","sourceRoot":"","sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport {AUTO_STYLE, AnimationEvent, AnimationPlayer, NoopAnimationPlayer, ɵAnimationGroupPlayer, ɵPRE_STYLE as PRE_STYLE, ɵStyleData} from '@angular/animations';\n\nimport {AnimationStyleNormalizer} from '../../src/dsl/style_normalization/animation_style_normalizer';\nimport {AnimationDriver} from '../../src/render/animation_driver';\n/**\n * @param {?} players\n * @return {?}\n */\nexport function optimizeGroupPlayer(players: AnimationPlayer[]): AnimationPlayer {\n  switch (players.length) {\n    case 0:\n      return new NoopAnimationPlayer();\n    case 1:\n      return players[0];\n    default:\n      return new ɵAnimationGroupPlayer(players);\n  }\n}\n/**\n * @param {?} driver\n * @param {?} normalizer\n * @param {?} element\n * @param {?} keyframes\n * @param {?=} preStyles\n * @param {?=} postStyles\n * @return {?}\n */\nexport function normalizeKeyframes(\n    driver: AnimationDriver, normalizer: AnimationStyleNormalizer, element: any,\n    keyframes: ɵStyleData[], preStyles: ɵStyleData = {},\n    postStyles: ɵStyleData = {}): ɵStyleData[] {\n  const /** @type {?} */ errors: string[] = [];\n  const /** @type {?} */ normalizedKeyframes: ɵStyleData[] = [];\n  let /** @type {?} */ previousOffset = -1;\n  let /** @type {?} */ previousKeyframe: ɵStyleData|null = null;\n  keyframes.forEach(kf => {\n    const /** @type {?} */ offset = /** @type {?} */(( kf['offset'] as number));\n    const /** @type {?} */ isSameOffset = offset == previousOffset;\n    const /** @type {?} */ normalizedKeyframe: ɵStyleData = (isSameOffset && previousKeyframe) || {};\n    Object.keys(kf).forEach(prop => {\n      let /** @type {?} */ normalizedProp = prop;\n      let /** @type {?} */ normalizedValue = kf[prop];\n      if (prop !== 'offset') {\n        normalizedProp = normalizer.normalizePropertyName(normalizedProp, errors);\n        switch (normalizedValue) {\n          case PRE_STYLE:\n            normalizedValue = preStyles[prop];\n            break;\n\n          case AUTO_STYLE:\n            normalizedValue = postStyles[prop];\n            break;\n\n          default:\n            normalizedValue =\n                normalizer.normalizeStyleValue(prop, normalizedProp, normalizedValue, errors);\n            break;\n        }\n      }\n      normalizedKeyframe[normalizedProp] = normalizedValue;\n    });\n    if (!isSameOffset) {\n      normalizedKeyframes.push(normalizedKeyframe);\n    }\n    previousKeyframe = normalizedKeyframe;\n    previousOffset = offset;\n  });\n  if (errors.length) {\n    const /** @type {?} */ LINE_START = '\\n - ';\n    throw new Error(\n        `Unable to animate due to the following errors:${LINE_START}${errors.join(LINE_START)}`);\n  }\n\n  return normalizedKeyframes;\n}\n/**\n * @param {?} player\n * @param {?} eventName\n * @param {?} event\n * @param {?} callback\n * @return {?}\n */\nexport function listenOnPlayer(\n    player: AnimationPlayer, eventName: string, event: AnimationEvent | undefined,\n    callback: (event: any) => any) {\n  switch (eventName) {\n    case 'start':\n      player.onStart(() => callback(event && copyAnimationEvent(event, 'start', player.totalTime)));\n      break;\n    case 'done':\n      player.onDone(() => callback(event && copyAnimationEvent(event, 'done', player.totalTime)));\n      break;\n    case 'destroy':\n      player.onDestroy(\n          () => callback(event && copyAnimationEvent(event, 'destroy', player.totalTime)));\n      break;\n  }\n}\n/**\n * @param {?} e\n * @param {?=} phaseName\n * @param {?=} totalTime\n * @return {?}\n */\nexport function copyAnimationEvent(\n    e: AnimationEvent, phaseName?: string, totalTime?: number): AnimationEvent {\n  const /** @type {?} */ event = makeAnimationEvent(\n      e.element, e.triggerName, e.fromState, e.toState, phaseName || e.phaseName,\n      totalTime == undefined ? e.totalTime : totalTime);\n  const /** @type {?} */ data = ( /** @type {?} */((e as any)))['_data'];\n  if (data != null) {\n    ( /** @type {?} */((event as any)))['_data'] = data;\n  }\n  return event;\n}\n/**\n * @param {?} element\n * @param {?} triggerName\n * @param {?} fromState\n * @param {?} toState\n * @param {?=} phaseName\n * @param {?=} totalTime\n * @return {?}\n */\nexport function makeAnimationEvent(\n    element: any, triggerName: string, fromState: string, toState: string, phaseName: string = '',\n    totalTime: number = 0): AnimationEvent {\n  return {element, triggerName, fromState, toState, phaseName, totalTime};\n}\n/**\n * @param {?} map\n * @param {?} key\n * @param {?} defaultValue\n * @return {?}\n */\nexport function getOrSetAsInMap(\n    map: Map<any, any>| {[key: string]: any}, key: any, defaultValue: any) {\n  let /** @type {?} */ value: any;\n  if (map instanceof Map) {\n    value = map.get(key);\n    if (!value) {\n      map.set(key, value = defaultValue);\n    }\n  } else {\n    value = map[key];\n    if (!value) {\n      value = map[key] = defaultValue;\n    }\n  }\n  return value;\n}\n/**\n * @param {?} command\n * @return {?}\n */\nexport function parseTimelineCommand(command: string): [string, string] {\n  const /** @type {?} */ separatorPos = command.indexOf(':');\n  const /** @type {?} */ id = command.substring(1, separatorPos);\n  const /** @type {?} */ action = command.substr(separatorPos + 1);\n  return [id, action];\n}\n\nlet /** @type {?} */ _contains: (elm1: any, elm2: any) => boolean = (elm1: any, elm2: any) => false;\nlet /** @type {?} */ _matches: (element: any, selector: string) => boolean = (element: any, selector: string) =>\n    false;\nlet /** @type {?} */ _query: (element: any, selector: string, multi: boolean) => any[] =\n    (element: any, selector: string, multi: boolean) => {\n      return [];\n    };\n\nif (typeof Element != 'undefined') {\n  // this is well supported in all browsers\n  _contains = (elm1: any, elm2: any) => { return /** @type {?} */(( elm1.contains(elm2) as boolean)); };\n\n  if (Element.prototype.matches) {\n    _matches = (element: any, selector: string) => element.matches(selector);\n  } else {\n    const /** @type {?} */ proto = /** @type {?} */(( Element.prototype as any));\n    const /** @type {?} */ fn = proto.matchesSelector || proto.mozMatchesSelector || proto.msMatchesSelector ||\n        proto.oMatchesSelector || proto.webkitMatchesSelector;\n    if (fn) {\n      _matches = (element: any, selector: string) => fn.apply(element, [selector]);\n    }\n  }\n\n  _query = (element: any, selector: string, multi: boolean): any[] => {\n    let /** @type {?} */ results: any[] = [];\n    if (multi) {\n      results.push(...element.querySelectorAll(selector));\n    } else {\n      const /** @type {?} */ elm = element.querySelector(selector);\n      if (elm) {\n        results.push(elm);\n      }\n    }\n    return results;\n  };\n}\n\nexport const /** @type {?} */ matchesElement = _matches;\nexport const /** @type {?} */ containsElement = _contains;\nexport const /** @type {?} */ invokeQuery = _query;\n"]}