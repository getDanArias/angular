{"version":3,"sources":["../../../../../../../packages/platform-webworker/src/web_workers/ui/platform_location.ts"],"names":[],"mappings":"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","file":"platform_location.js","sourceRoot":"","sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {LocationChangeListener} from '@angular/common';\nimport {EventEmitter, Injectable} from '@angular/core';\nimport {ÉµBrowserPlatformLocation as BrowserPlatformLocation} from '@angular/platform-browser';\nimport {MessageBus} from '../shared/message_bus';\nimport {ROUTER_CHANNEL} from '../shared/messaging_api';\nimport {LocationType, Serializer, SerializerTypes} from '../shared/serializer';\nimport {ServiceMessageBroker, ServiceMessageBrokerFactory} from '../shared/service_message_broker';\nexport class MessageBasedPlatformLocation {\nprivate _channelSink: EventEmitter<Object>;\nprivate _broker: ServiceMessageBroker;\n/**\n * @param {?} _brokerFactory\n * @param {?} _platformLocation\n * @param {?} bus\n * @param {?} _serializer\n */\nconstructor(\nprivate _brokerFactory: ServiceMessageBrokerFactory,\nprivate _platformLocation: BrowserPlatformLocation, bus: MessageBus,\nprivate _serializer: Serializer) {\n    this._platformLocation.onPopState( /** @type {?} */((<LocationChangeListener>this._sendUrlChangeEvent.bind(this))));\n    this._platformLocation.onHashChange( /** @type {?} */((\n        <LocationChangeListener>this._sendUrlChangeEvent.bind(this))));\n    this._broker = this._brokerFactory.createMessageBroker(ROUTER_CHANNEL);\n    this._channelSink = bus.to(ROUTER_CHANNEL);\n  }\n/**\n * @return {?}\n */\nstart(): void {\n    const /** @type {?} */ P = SerializerTypes.PRIMITIVE;\n\n    this._broker.registerMethod('getLocation', null, this._getLocation.bind(this), LocationType);\n    this._broker.registerMethod('setPathname', [P], this._setPathname.bind(this));\n    this._broker.registerMethod(\n        'pushState', [P, P, P], this._platformLocation.pushState.bind(this._platformLocation));\n    this._broker.registerMethod(\n        'replaceState', [P, P, P],\n        this._platformLocation.replaceState.bind(this._platformLocation));\n    this._broker.registerMethod(\n        'forward', null, this._platformLocation.forward.bind(this._platformLocation));\n    this._broker.registerMethod(\n        'back', null, this._platformLocation.back.bind(this._platformLocation));\n  }\n/**\n * @return {?}\n */\n\nprivate _getLocation(): Promise<Location> {\n    return Promise.resolve(this._platformLocation.location);\n  }\n/**\n * @param {?} e\n * @return {?}\n */\n\nprivate _sendUrlChangeEvent(e: Event): void {\n    this._channelSink.emit({\n      'event': {'type': e.type},\n      'location': this._serializer.serialize(this._platformLocation.location, LocationType),\n    });\n  }\n/**\n * @param {?} pathname\n * @return {?}\n */\n\nprivate _setPathname(pathname: string): void { this._platformLocation.pathname = pathname; }\nstatic decorators: {type: Function, args?: any[]}[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: {type: Function, args?: any[]}[]}|null)[] = () => [\n{type: ServiceMessageBrokerFactory, },\n{type: BrowserPlatformLocation, },\n{type: MessageBus, },\n{type: Serializer, },\n];\n}\n\nfunction MessageBasedPlatformLocation_tsickle_Closure_declarations() {\n/** @type {?} */\nMessageBasedPlatformLocation.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nMessageBasedPlatformLocation.ctorParameters;\n/** @type {?} */\nMessageBasedPlatformLocation.prototype._channelSink;\n/** @type {?} */\nMessageBasedPlatformLocation.prototype._broker;\n/** @type {?} */\nMessageBasedPlatformLocation.prototype._brokerFactory;\n/** @type {?} */\nMessageBasedPlatformLocation.prototype._platformLocation;\n/** @type {?} */\nMessageBasedPlatformLocation.prototype._serializer;\n}\n\n"]}