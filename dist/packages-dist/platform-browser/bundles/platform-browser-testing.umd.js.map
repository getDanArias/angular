{"version":3,"file":"platform-browser-testing.umd.js","sources":["../../../../packages/platform-browser/testing/src/browser_util.ts","../../../../packages/platform-browser/testing/src/browser.ts","../../../../packages/platform-browser/testing/src/testing.ts","../../../../packages/platform-browser/testing/public_api.ts","../../../../packages/platform-browser/testing/index.ts"],"sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {NgZone, ɵglobal as global} from '@angular/core';\nimport {ɵgetDOM as getDOM} from '@angular/platform-browser';\n\nexport let /** @type {?} */ browserDetection: BrowserDetection;\nexport class BrowserDetection {\nprivate _overrideUa: string|null;\n/**\n * @return {?}\n */\n\nprivate get _ua(): string {\n    if (typeof this._overrideUa === 'string') {\n      return this._overrideUa;\n    }\n\n    return getDOM() ? getDOM().getUserAgent() : '';\n  }\n/**\n * @return {?}\n */\nstatic setup() { browserDetection = new BrowserDetection(null); }\n/**\n * @param {?} ua\n */\nconstructor(ua: string|null) { this._overrideUa = ua; }\n/**\n * @return {?}\n */\nget isFirefox(): boolean { return this._ua.indexOf('Firefox') > -1; }\n/**\n * @return {?}\n */\nget isAndroid(): boolean {\n    return this._ua.indexOf('Mozilla/5.0') > -1 && this._ua.indexOf('Android') > -1 &&\n        this._ua.indexOf('AppleWebKit') > -1 && this._ua.indexOf('Chrome') == -1 &&\n        this._ua.indexOf('IEMobile') == -1;\n  }\n/**\n * @return {?}\n */\nget isEdge(): boolean { return this._ua.indexOf('Edge') > -1; }\n/**\n * @return {?}\n */\nget isIE(): boolean { return this._ua.indexOf('Trident') > -1; }\n/**\n * @return {?}\n */\nget isWebkit(): boolean {\n    return this._ua.indexOf('AppleWebKit') > -1 && this._ua.indexOf('Edge') == -1 &&\n        this._ua.indexOf('IEMobile') == -1;\n  }\n/**\n * @return {?}\n */\nget isIOS7(): boolean {\n    return (this._ua.indexOf('iPhone OS 7') > -1 || this._ua.indexOf('iPad OS 7') > -1) &&\n        this._ua.indexOf('IEMobile') == -1;\n  }\n/**\n * @return {?}\n */\nget isSlow(): boolean { return this.isAndroid || this.isIE || this.isIOS7; }\n/**\n * @return {?}\n */\nget supportsNativeIntlApi(): boolean {\n    return !!( /** @type {?} */((<any>global))).Intl && ( /** @type {?} */((<any>global))).Intl !== ( /** @type {?} */((<any>global))).IntlPolyfill;\n  }\n/**\n * @return {?}\n */\nget isChromeDesktop(): boolean {\n    return this._ua.indexOf('Chrome') > -1 && this._ua.indexOf('Mobile Safari') == -1 &&\n        this._ua.indexOf('Edge') == -1;\n  }\n/**\n * @return {?}\n */\nget isOldChrome(): boolean {\n    return this._ua.indexOf('Chrome') > -1 && this._ua.indexOf('Chrome/3') > -1 &&\n        this._ua.indexOf('Edge') == -1;\n  }\n}\n\nfunction BrowserDetection_tsickle_Closure_declarations() {\n/** @type {?} */\nBrowserDetection.prototype._overrideUa;\n}\n\n\nBrowserDetection.setup();\n/**\n * @param {?} element\n * @param {?} eventType\n * @return {?}\n */\nexport function dispatchEvent(element: any, eventType: any): void {\n  getDOM().dispatchEvent(element, getDOM().createEvent(eventType));\n}\n/**\n * @param {?} html\n * @return {?}\n */\nexport function el(html: string): HTMLElement {\n  return /** @type {?} */(( <HTMLElement>getDOM().firstChild(getDOM().content(getDOM().createTemplate(html)))));\n}\n/**\n * @param {?} css\n * @return {?}\n */\nexport function normalizeCSS(css: string): string {\n  return css.replace(/\\s+/g, ' ')\n      .replace(/:\\s/g, ':')\n      .replace(/'/g, '\"')\n      .replace(/ }/g, '}')\n      .replace(/url\\((\\\"|\\s)(.+)(\\\"|\\s)\\)(\\s*)/g, (...match: string[]) => `url(\"${match[2]}\")`)\n      .replace(/\\[(.+)=([^\"\\]]+)\\]/g, (...match: string[]) => `[${match[1]}=\"${match[2]}\"]`);\n}\n\nconst /** @type {?} */ _singleTagWhitelist = ['br', 'hr', 'input'];\n/**\n * @param {?} el\n * @return {?}\n */\nexport function stringifyElement(el: any /** TODO #9100 */): string {\n  let /** @type {?} */ result = '';\n  if (getDOM().isElementNode(el)) {\n    const /** @type {?} */ tagName = getDOM().tagName(el).toLowerCase();\n\n    // Opening tag\n    result += `<${tagName}`;\n\n    // Attributes in an ordered way\n    const /** @type {?} */ attributeMap = getDOM().attributeMap(el);\n    const /** @type {?} */ keys: string[] = Array.from(attributeMap.keys()).sort();\n    for (let /** @type {?} */ i = 0; i < keys.length; i++) {\n      const /** @type {?} */ key = keys[i];\n      const /** @type {?} */ attValue = attributeMap.get(key);\n      if (typeof attValue !== 'string') {\n        result += ` ${key}`;\n      } else {\n        result += ` ${key}=\"${attValue}\"`;\n      }\n    }\n    result += '>';\n\n    // Children\n    const /** @type {?} */ childrenRoot = getDOM().templateAwareRoot(el);\n    const /** @type {?} */ children = childrenRoot ? getDOM().childNodes(childrenRoot) : [];\n    for (let /** @type {?} */ j = 0; j < children.length; j++) {\n      result += stringifyElement(children[j]);\n    }\n\n    // Closing tag\n    if (_singleTagWhitelist.indexOf(tagName) == -1) {\n      result += `</${tagName}>`;\n    }\n  } else if (getDOM().isCommentNode(el)) {\n    result += `<!--${getDOM().nodeValue(el)}-->`;\n  } else {\n    result += getDOM().getText(el);\n  }\n\n  return result;\n}\n/**\n * @return {?}\n */\nexport function createNgZone(): NgZone {\n  return new NgZone({enableLongStackTrace: true});\n}\n","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport {APP_ID, NgModule, NgZone, PLATFORM_INITIALIZER, PlatformRef, StaticProvider, createPlatformFactory, platformCore} from '@angular/core';\nimport {BrowserModule, ɵBrowserDomAdapter as BrowserDomAdapter, ɵELEMENT_PROBE_PROVIDERS as ELEMENT_PROBE_PROVIDERS} from '@angular/platform-browser';\nimport {BrowserDetection, createNgZone} from './browser_util';\n/**\n * @return {?}\n */\nfunction initBrowserTests() {\n  BrowserDomAdapter.makeCurrent();\n  BrowserDetection.setup();\n}\n\nconst /** @type {?} */ _TEST_BROWSER_PLATFORM_PROVIDERS: StaticProvider[] =\n    [{provide: PLATFORM_INITIALIZER, useValue: initBrowserTests, multi: true}];\n/**\n * Platform for testing\n * \n * \\@stable\n */\nexport const /** @type {?} */ platformBrowserTesting =\n    createPlatformFactory(platformCore, 'browserTesting', _TEST_BROWSER_PLATFORM_PROVIDERS);\n/**\n * NgModule for testing.\n * \n * \\@stable\n */\nexport class BrowserTestingModule {\nstatic decorators: {type: Function, args?: any[]}[] = [\n{ type: NgModule, args: [{\n  exports: [BrowserModule],\n  providers: [\n    {provide: APP_ID, useValue: 'a'},\n    ELEMENT_PROBE_PROVIDERS,\n    {provide: NgZone, useFactory: createNgZone},\n  ]\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: {type: Function, args?: any[]}[]}|null)[] = () => [\n];\n}\n\nfunction BrowserTestingModule_tsickle_Closure_declarations() {\n/** @type {?} */\nBrowserTestingModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nBrowserTestingModule.ctorParameters;\n}\n\n","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of the platform-browser/testing package.\n */\nexport {platformBrowserTesting,BrowserTestingModule} from './browser';\n","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\nexport {platformBrowserTesting,BrowserTestingModule} from './src/testing';\n","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport {platformBrowserTesting,BrowserTestingModule} from './public_api';\n\nexport {createNgZone as ɵa} from './src/browser_util';"],"names":["getDOM","global","NgZone","BrowserDomAdapter","PLATFORM_INITIALIZER","createPlatformFactory","platformCore","NgModule","BrowserModule","APP_ID","ELEMENT_PROBE_PROVIDERS"],"mappings":"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"}